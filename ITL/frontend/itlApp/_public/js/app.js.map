{"version":3,"sources":["app/app.js","app/scripts/controllers/appendNoteModalController.js","app/scripts/controllers/createIssueModalController.js","app/scripts/controllers/createNoteModalController.js","app/scripts/controllers/homeController.js","app/scripts/controllers/noteModalController.js","app/scripts/controllers/phaseModalController.js","app/scripts/controllers/taskListController.js","app/scripts/controllers/taskModalController.js","app/scripts/controllers/templateController.js","app/scripts/directives/affixedComponentPanelDirective.js","app/scripts/directives/availableComponentsPanelDirective.js","app/scripts/directives/availablePhaseDraggableDirective.js","app/scripts/directives/availableTaskDraggableDirective.js","app/scripts/directives/componentSearchDirective.js","app/scripts/directives/contactLookupDirective.js","app/scripts/directives/datePickerDirective.js","app/scripts/directives/expandTableRowDirective.js","app/scripts/directives/phaseCollapseDirective.js","app/scripts/directives/phaseContainerDirective.js","app/scripts/directives/phaseDeleteDirective.js","app/scripts/directives/phaseDirective.js","app/scripts/directives/phaseEditDirective.js","app/scripts/directives/phaseSortableDirective.js","app/scripts/directives/taskContainerDirective.js","app/scripts/directives/taskDeleteDirective.js","app/scripts/directives/taskDirective.js","app/scripts/directives/taskEditDirective.js","app/scripts/directives/taskScrollTopDirective.js","app/scripts/directives/taskSortableDirective.js","app/scripts/directives/windowHeightDirective.js","app/scripts/filters/dateFilter.js","app/scripts/filters/noteTypesFilter.js","app/scripts/filters/picklistTransformFilter.js","app/scripts/filters/taskFilter.js","app/scripts/services/componentService.js","app/scripts/services/dateService.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjKA;AACA;AACA;AACA;AACA;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1MA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACbA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"_public/js/app.js","sourcesContent":["var app = angular.module('itlApp', ['ngRoute', 'textAngular', 'naif.base64', 'ngMessages', 'slick-angular-validation']).config(function($provide) {\n    $provide.decorator('taOptions', ['taRegisterTool', '$delegate', function(taRegisterTool, taOptions) { // $delegate is the taOptions we are decorating\n        taOptions.toolbar = [\n            ['bold', 'italics', 'underline', 'strikeThrough', 'ul', 'ol', 'insertLink']\n        ];\n        return taOptions;\n    }]);\n});\n\napp.config(function($routeProvider) {\n    if (resourceUrl === \"{!$Resource.ITL_Resource}\") {\n        resourceUrl = \"\";\n    }\n});","var app = angular.module('itlApp');\n\napp.controller('appendNoteModalController', ['$scope', function($scope) {\n\t$scope.noteWrapper = {\n\t\tnote : {}\n\t};\n\t$scope.textWrapper = {\n\t\ttext : {}\n\t};\n\t$scope.formValidator = {\n\t\tform : {\n\t\t\tmessage : 'An error occurred. Please try again.'\n\t\t},\n\t\tType__c : {\n\t\t\tmessage : 'Type is required'\n\t\t},\n\t\tNotes_Text_Score__c : {\n\t\t\tmessage : 'Score is required'\n\t\t},\n\t\tNotes__c : {\n\t\t\tmessage : 'Notes is required'\n\t\t}\n\t};\n\n\t$scope.$on('appendNoteModal-broadcast', function(event, values) {\n\t\t$scope.clearValidation();\n\t\t$scope.noteWrapper = {\n\t\t\tnote : {}\n\t\t};\n\t\t$scope.textWrapper = {\n\t\t\ttext : {}\n\t\t};\n\t\t$scope.noteWrapper = values.noteWrapper;\n\t\t$scope.taskId = $scope.noteWrapper.note.Installation_Task__c;\n\t\t$scope.textWrapper.text.Plan_Notes__c = $scope.noteWrapper.note.Id;\n\t});\n\n\t$scope.clearValidation = function() {\n\t\t_.each(_.values($scope.formValidator), function(valObj) {\n\t\t\tdelete valObj.error;\n\t\t});\n\t};\n\n\t$scope.validateForm = function() {\n\t\t$scope.clearValidation();\n\n\t\t$scope.formValidator.Type__c.error = _.isEmpty($scope.textWrapper.text.Type__c);\n\t\t$scope.formValidator.Notes_Text_Score__c.error = _.isEmpty($scope.textWrapper.text.Notes_Text_Score__c);\n\t\t$scope.formValidator.Notes__c.error = _.isEmpty($scope.textWrapper.text.Notes__c);\n\n\t\tvar errors = _.where(_.values($scope.formValidator), {error:true});\n\t\treturn errors.length == 0;\n\t};\n\n\t$scope.saveText = function() {\n\t\tif ($scope.validateForm()) {\n\t\t\t$scope.$emit('createText-emit', {\n\t\t\t\ttaskId : $scope.taskId,\n\t\t\t\ttextWrapper : $scope.textWrapper\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.cancel = function() {\n\t\t$scope.$emit('closeNoteModal-emit');\n\t};\n\n\t$scope.$watchCollection('textWrapper.text', function() {\n\t\tvar errors = _.where(_.values($scope.formValidator), {error:true});\n\t\tif (errors.length > 0) {\n\t\t\t$scope.validateForm();\n\t\t}\n\t});\n}]);","var app = angular.module('itlApp');\n\napp.controller('createIssueModalController', ['$scope', function($scope) {\n\t$scope.noteWrapper = {\n\t\tnote : {}\n\t};\n\t$scope.issueWrapper = {\n\t\tissue : {}\n\t};\n\t$scope.formValidator = {\n\t\tform : {\n\t\t\tmessage : 'An error occurred. Please try again.'\n\t\t},\n\t\tDiscovered__c : {\n\t\t\tmessage : 'Discovered is required'\n\t\t},\n\t\tResolved__c : {\n\t\t\tmessage : 'Resolved is required'\n\t\t},\n\t\tIssue_Categories__c : {\n\t\t\tmessage : 'At least one category must be selected'\n\t\t},\n\t\tDetails__c : {\n\t\t\tmessage : 'Details is required'\n\t\t}\n\t};\n\n\t$scope.$on('createIssueModal-broadcast', function(event, values) {\n\t\t$scope.clearValidation();\n\t\t$scope.noteWrapper = {\n\t\t\tnote : {}\n\t\t};\n\t\t$scope.issueWrapper = {\n\t\t\tissue : {}\n\t\t};\n\t\t$scope.issueHelper = {};\n\t\t$scope.noteWrapper = values.noteWrapper;\n\t\t$scope.issueWrapper.issue.Plan_Notes__c = $scope.noteWrapper.note.Id;\n\t\t$scope.taskId = $scope.noteWrapper.note.Installation_Task__c;\n\t});\n\n\t$scope.clearValidation = function() {\n\t\t_.each(_.values($scope.formValidator), function(valObj) {\n\t\t\tdelete valObj.error;\n\t\t});\n\t};\n\n\t$scope.validateForm = function() {\n\t\t$scope.clearValidation();\n\n\t\tif ($scope.issueWrapper.issue.Discovered__c) {\n\t\t\tif (!$scope.issueWrapper.issue.Discovered__c.match(/^((1[0-2])|(0[1-9])|([1-9]))\\/((3[0-1])|([1-2][0-9])|(0[1-9])|([1-9]))\\/(\\d{4})$/g)) {\n\t\t\t\t$scope.formValidator.Discovered__c.error = true;\n\t\t\t\t$scope.formValidator.Discovered__c.message = 'Invalid MM/DD/YYYY date';\n\t\t\t} else {\n\t\t\t\tvar discovered = new Date($scope.issueWrapper.issue.Discovered__c);\n\t\t\t\tif (!_.isDate(discovered)) {\n\t\t\t\t\t$scope.formValidator.Discovered__c.error = true;\n\t\t\t\t\t$scope.formValidator.Discovered__c.message = 'Invalid MM/DD/YYYY date';\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t$scope.formValidator.Discovered__c.error = true;\n\t\t\t$scope.formValidator.Discovered__c.message = 'Discovered is required';\n\t\t}\n\t\tif ($scope.issueWrapper.issue.Resolved__c) {\n\t\t\tif (!$scope.issueWrapper.issue.Resolved__c.match(/^((1[0-2])|(0[1-9])|([1-9]))\\/((3[0-1])|([1-2][0-9])|(0[1-9])|([1-9]))\\/(\\d{4})$/g)) {\n\t\t\t\t$scope.formValidator.Resolved__c.error = true;\n\t\t\t\t$scope.formValidator.Resolved__c.message = 'Invalid MM/DD/YYYY date';\n\t\t\t} else {\n\t\t\t\tvar discovered = new Date($scope.issueWrapper.issue.Resolved__c);\n\t\t\t\tif (!_.isDate(discovered)) {\n\t\t\t\t\t$scope.formValidator.Resolved__c.error = true;\n\t\t\t\t\t$scope.formValidator.Resolved__c.message = 'Invalid MM/DD/YYYY date';\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t$scope.formValidator.Resolved__c.error = true;\n\t\t\t$scope.formValidator.Resolved__c.message = 'Discovered is required';\n\t\t}\n\t\t$scope.formValidator.Issue_Categories__c.error = _.isEmpty($scope.issueWrapper.issue.Issue_Categories__c);\n\t\t$scope.formValidator.Details__c.error = _.isEmpty($scope.issueWrapper.issue.Details__c);\n\n\t\tvar errors = _.where(_.values($scope.formValidator), {error:true});\n\t\treturn errors.length == 0;\n\t};\n\n\t$scope.saveIssue = function() {\n\t\tif ($scope.validateForm()) {\n\t\t\t$scope.$emit('createIssue-emit', {\n\t\t\t\ttaskId : $scope.taskId,\n\t\t\t\tissueWrapper : $scope.issueWrapper\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.cancel = function() {\n\t\t$scope.$emit('closeNoteModal-emit');\n\t};\n\n\t$scope.updateCategories = function() {\n\t\t$scope.issueWrapper.issue.Issue_Categories__c = '';\n\t\tvar categories = [];\n\t\tvar helperKeys = _.keys($scope.issueHelper);\n\t\t_.each(helperKeys, function(key) {\n\t\t\tif ($scope.issueHelper[key]) {\n\t\t\t\tcategories.push(key);\n\t\t\t}\n\t\t});\n\t\t$scope.issueWrapper.issue.Issue_Categories__c = categories.join(';');\n\t};\n\n\t$scope.$watchCollection('issueHelper', function() {\n\t\t$scope.updateCategories();\n\t});\n\n\t$scope.$watchCollection('issueWrapper.issue', function() {\n\t\tvar errors = _.where(_.values($scope.formValidator), {error:true});\n\t\tif (errors.length > 0) {\n\t\t\t$scope.validateForm();\n\t\t}\n\t});\n}]);","var app = angular.module('itlApp');\n\napp.controller('createNoteModalController', ['$scope', function($scope) {\n\t$scope.noteReasonOptionsTemplate = resourceUrl + '/partials/noteReasonOptions.html';\n\t$scope.xlinkHelper = {\n\t\tsearch : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#search\",\n\t\tdown : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#down\",\n\t\tcontact : resourceUrl + \"/icons/standard-sprite/svg/symbols.svg#contact\",\n\t\tclose : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#close\"\n\t};\n\t$scope.displayContactLabel = false;\n\t$scope.displayContactValue = true;\n\t$scope.contactName = '';\n\t$scope.contactSearch = '';\n\t$scope.noteWrapper = {\n\t\tnote : {}\n\t};\n\t$scope.textWrapper = {\n\t\ttext : {}\n\t};\n\t$scope.formValidator = {\n\t\tform : {\n\t\t\tmessage : 'An error occurred. Please try again.'\n\t\t},\n\t\tSubject__c : {\n\t\t\tmessage : 'Subject is required'\n\t\t},\n\t\tReason__c : {\n\t\t\tmessage : 'Reason is required'\n\t\t},\n\t\tExpire_on__c : {\n\t\t\tmessage : 'Date must be in the future'\n\t\t},\n\t\tContact__c : {\n\t\t\tmessage : 'Please select a valid contact from the list.'\n\t\t},\n\t\tType__c : {\n\t\t\tmessage : 'Type is required'\n\t\t},\n\t\tNotes_Text_Score__c : {\n\t\t\tmessage : 'Score is required'\n\t\t},\n\t\tNotes__c : {\n\t\t\tmessage : 'Notes is required'\n\t\t}\n\t};\n\n\t$scope.$on('createNoteModal-broadcast', function(event, values) {\n\t\t$scope.clearValidation();\n\t\t$scope.displayContactLabel = false;\n\t\t$scope.displayContactValue = true;\n\t\t$scope.contactName = '';\n\t\t$scope.contactSearch = '';\n\t\t$scope.noteWrapper = {\n\t\t\tnote : {}\n\t\t};\n\t\t$scope.textWrapper = {\n\t\t\ttext : {}\n\t\t};\n\t\t$scope.taskId = values.taskId;\n\t\t$scope.noteWrapper.note.Installation_Task__c = values.taskId;\n\t});\n\n\t$scope.$on('contactSelected-emit', function(event, values) {\n\t\t$scope.displayContactValue = false;\n\t\t$scope.displayContactLabel = true;\n\t\t$scope.contactName = values.item.label;\n\t\t$scope.noteWrapper.note.Company__c = values.item.accountId;\n\t\t$scope.noteWrapper.note.Contact__c = values.item.valueId;\n\t\t$scope.contactSearch = '';\n\t});\n\n\t$scope.clearValidation = function() {\n\t\t_.each(_.values($scope.formValidator), function(valObj) {\n\t\t\tdelete valObj.error;\n\t\t});\n\t};\n\n\t$scope.validateForm = function() {\n\t\t$scope.clearValidation();\n\n\t\t$scope.formValidator.Subject__c.error = _.isEmpty($scope.noteWrapper.note.Subject__c);\n\t\t$scope.formValidator.Reason__c.error = _.isEmpty($scope.noteWrapper.note.Reason__c);\n\t\tif ($scope.noteWrapper.note.Expire_on__c) {\n\t\t\tvar d_today = new Date();\n\t\t\tvar dateString = (d_today.getUTCMonth() + 1) + '/' + d_today.getUTCDate() + '/' + d_today.getUTCFullYear();\n\t\t\tif (!$scope.noteWrapper.note.Expire_on__c.match(/^((1[0-2])|(0[1-9])|([1-9]))\\/((3[0-1])|([1-2][0-9])|(0[1-9])|([1-9]))\\/(\\d{4})$/g)) {\n\t\t\t\t$scope.formValidator.Expire_on__c.error = true;\n\t\t\t\t$scope.formValidator.Expire_on__c.message = 'Invalid MM/DD/YYYY date';\n\t\t\t} else {\n\t\t\t\tvar expireOn = new Date($scope.noteWrapper.note.Expire_on__c + ' 00:00:00 GMT');\n\t\t\t\tif (_.isDate(expireOn)) {\n\t\t\t\t\t$scope.formValidator.Expire_on__c.error = (new Date(dateString + ' 00:00:00 GMT')) > expireOn;\n\t\t\t\t\t$scope.formValidator.Expire_on__c.message = 'Date must be in the future'\n\t\t\t\t} else {\n\t\t\t\t\t$scope.formValidator.Expire_on__c.error = true;\n\t\t\t\t\t$scope.formValidator.Expire_on__c.message = 'Invalid MM/DD/YYYY date';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t$scope.formValidator.Contact__c.error = !_.isEmpty($scope.contactSearch) && _.isEmpty($scope.noteWrapper.note.Contact__c);\n\t\t$scope.formValidator.Type__c.error = _.isEmpty($scope.textWrapper.text.Type__c);\n\t\t$scope.formValidator.Notes_Text_Score__c.error = _.isEmpty($scope.textWrapper.text.Notes_Text_Score__c);\n\t\t$scope.formValidator.Notes__c.error = _.isEmpty($scope.textWrapper.text.Notes__c);\n\n\t\tvar errors = _.where(_.values($scope.formValidator), {error:true});\n\t\treturn errors.length == 0;\n\t};\n\n\t$scope.saveNote = function() {\n\t\tif ($scope.validateForm()) {\n\t\t\tif (!$scope.noteWrapper.note.Expire_on__c) {\n\t\t\t\tdelete $scope.noteWrapper.note.Expire_on__c;\n\t\t\t}\n\t\t\t$scope.$emit('createNoteAndText-emit', {\n\t\t\t\ttaskId : $scope.taskId,\n\t\t\t\tnoteWrapper : $scope.noteWrapper,\n\t\t\t\ttextWrapper : $scope.textWrapper\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.cancel = function() {\n\t\t$scope.$emit('closeNoteModal-emit');\n\t};\n\n\t$scope.clearContact = function() {\n\t\t$scope.displayContactValue = true;\n\t\t$scope.displayContactLabel = false;\n\t\t$scope.contactName = '';\n\t\t$scope.contactSearch = '';\n\t\t$scope.noteWrapper.note.Contact__c = '';\n\t\t$scope.noteWrapper.note.Company__c = '';\n\t};\n\n\t$scope.$watch('noteWrapper.note.Use_Warning__c', function(newValue, oldValue) {\n\t\tif (!newValue) {\n\t\t\tdelete $scope.noteWrapper.note.Expire_on__c;\n\t\t}\n\t});\n\n\t$scope.$watch('contactSearch', function() {\n\t\tvar errors = _.where(_.values($scope.formValidator), {error:true});\n\t\tif (errors.length > 0) {\n\t\t\t$scope.validateForm();\n\t\t}\n\t});\n\n\t$scope.$watchCollection('noteWrapper.note', function() {\n\t\tvar errors = _.where(_.values($scope.formValidator), {error:true});\n\t\tif (errors.length > 0) {\n\t\t\t$scope.validateForm();\n\t\t}\n\t});\n\n\t$scope.$watchCollection('textWrapper.text', function() {\n\t\tvar errors = _.where(_.values($scope.formValidator), {error:true});\n\t\tif (errors.length > 0) {\n\t\t\t$scope.validateForm();\n\t\t}\n\t});\n}]);","var app = angular.module(\"itlApp\");\n\napp.controller(\"homeController\", [\"$scope\", function($scope) {\n\t\n}]);","var app = angular.module('itlApp');\n\napp.controller('noteModalController', ['$scope', function($scope) {\n\t$scope.displayCreateNoteModal = false;\n\t$scope.displayViewNoteModal = false;\n\t$scope.displayAppendNoteModal = false;\n\t$scope.displayCreateIssueModal = false;\n\t$scope.canCreateNotes = false;\n\t$scope.createNoteModalTemplate = resourceUrl + '/partials/createNoteModal.html';\n\t$scope.appendNoteModalTemplate = resourceUrl + '/partials/appendNoteModal.html';\n\t$scope.createIssueModalTemplate = resourceUrl + '/partials/createIssueModal.html';\n\t$scope.xlinkHelper = {\n\t\tclose : resourceUrl + \"/icons/action-sprite/svg/symbols.svg#close\"\n\t};\n\t$scope.noteWrapper = {};\n\n\t$scope.switchTab = function(tabName) {\n\t\t$(\".slds-tabs__item\").removeClass(\"slds-active\");\n\t\t$(\".slds-tabs__content\").removeClass(\"slds-show\");\n\t\t$(\".slds-tabs__content\").addClass(\"slds-hide\");\n\t\t$(\"#\" + tabName + \"--tab\").addClass(\"slds-active\");\n\t\t$(\"#\" + tabName + \"--panel\").removeClass(\"slds-hide\");\n\t\t$(\"#\" + tabName + \"--panel\").addClass(\"slds-show\");\n\t};\n\n\t$scope.hideAllModals = function() {\n\t\t$scope.displayCreateNoteModal = false;\n\t\t$scope.displayViewNoteModal = false;\n\t\t$scope.displayAppendNoteModal = false;\n\t\t$scope.displayCreateIssueModal = false;\n\t};\n\n\t$scope.$on('createNoteModal-broadcast', function(event, values) {\n\t\t$scope.hideAllModals();\n\t\t$scope.displayCreateNoteModal = true;\n\t});\n\n\t$scope.$on('viewNoteModal-broadcast', function(event, values) {\n\t\t$scope.hideAllModals();\n\t\t$scope.noteWrapper = values.noteWrapper;\n\t\t$scope.canCreateNotes = values.canCreateNotes;\n\t\t$scope.displayViewNoteModal = true;\n\t\t$scope.switchTab('note-text');\n\t});\n\n\t$scope.$on('cancelNoteModal-emit', function(event, values) {\n\t\t$scope.hideAllModals();\n\t\t$scope.displayViewNoteModal = true;\n\t});\n\n\t$scope.closeModal = function() {\n\t\t$scope.hideAllModals();\n\t\t$scope.noteWrapper = {};\n\t\t$scope.$emit('closeNoteModal-emit');\n\t};\n\n\t$scope.appendNoteModal = function() {\n\t\t$scope.hideAllModals();\n\t\t$scope.displayAppendNoteModal = true;\n\t\t$scope.$broadcast('appendNoteModal-broadcast', {\n\t\t\tnoteWrapper : $scope.noteWrapper\n\t\t});\n\t};\n\n\t$scope.createIssueModal = function() {\n\t\t$scope.hideAllModals();\n\t\t$scope.displayCreateIssueModal = true;\n\t\t$scope.$broadcast('createIssueModal-broadcast', {\n\t\t\tnoteWrapper : $scope.noteWrapper\n\t\t});\n\t};\n\n}]);","var app = angular.module(\"itlApp\");\n\napp.controller(\"phaseModalController\", [\"$scope\", \"componentService\", function($scope, componentService) {\n\t$scope.modalPhase = {};\n\t$scope.formValidator = {\n\t\tform: {\n\t\t\tmessage: 'An error occurred. Please try again.'\n\t\t},\n\t\tPhase_Name__c: {\n\t\t\tmessage: 'Name is required'\n\t\t}\n\t};\n\n\t$scope.$on(\"phaseCreate-broadcast\", function() {\n\t\t$scope.modalPhase = {};\n\t\t$scope.clearValidation();\n\t});\n\n\t$scope.$on(\"phaseEdited-broadcast\", function(event, values) {\n\t\t$scope.modalPhase = values.phase;\n\t\t$scope.modalPhase.Phase_Name__c = componentService.removeEscapedCharacters($scope.modalPhase.Phase_Name__c);\n\t\t$scope.clearValidation();\n\t});\n\n\t$scope.$on(\"phaseModal-displayError\", function(event, values) {\n\t\t$scope.displayRemoteError(values.message);\n\t});\n\n\t$scope.clearValidation = function() {\n\t\t_.each(_.values($scope.formValidator), function(valObj) {\n\t\t\tdelete valObj.error;\n\t\t});\n\t};\n\n\t$scope.validateForm = function() {\n\t\t$scope.clearValidation();\n\t\t$scope.formValidator.Phase_Name__c.error = _.isEmpty($scope.modalPhase.Phase_Name__c);\n\n\t\tvar errors = _.where(_.values($scope.formValidator), {error:true});\n\t\treturn errors.length > 0;\n\t};\n\n\t$scope.handleSaveModalPhase = function() {\n\t\tif (!$scope.validateForm()) {\n\t\t\t$scope.saveModalPhase();\n\t\t}\n\t};\n\n\t$scope.displayRemoteError = function(message) {\n\t\t$scope.formValidator.form.message = 'An error occurred. Please try again.';\n\t\tif (message) {\n\t\t\t$scope.formValidator.form.message = message;\n\t\t}\n\t\t$scope.formValidator.form.error = true;\n\t\t$scope.helper.formReady = true;\n\t};\n\n\t$scope.saveModalPhase = function() {\n\t\tif ($scope.modalPhase.Id) {\n\t\t\t$scope.$emit(\"saveModalPhase\", {\n\t\t\t\tphase: $scope.modalPhase\n\t\t\t});\n\t\t} else {\n\t\t\t$scope.$emit(\"createModalPhase\", {\n\t\t\t\tphase: $scope.modalPhase\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.cancelModalPhase = function() {\n\t\t$scope.modalPhase = {};\n\t\t$scope.$emit(\"cancelModalPhase\");\n\t};\n\n}]);","var app = angular.module('itlApp');\n\napp.controller('taskListController', ['$scope', '$window', 'dateService', 'componentService', function($scope, $window, dateService, componentService) {\n\t$scope.spinner = {\n\t\tdisplay : true,\n\t\tjobCount : 0\n\t};\n\t$scope.vars = {\n\t\ttaskListId : taskListId,\n\t\ttaskId : window.taskId\n\t};\n\t$scope.planId = planId;\n\t$scope.taskListTemplate = resourceUrl + '/partials/taskList.html';\n\t$scope.noteModalTemplate = resourceUrl + '/partials/noteModal.html';\n\t$scope.resourceUrl = resourceUrl;\n\t$scope.listWrapper = {};\n\t$scope.allTaskLists = [];\n\t$scope.taskWrapperDetail = {};\n\t$scope.taskWrapperDetailHelper = {};\n\t$scope.xlinkHelper = {\n\t\tadd : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#add\",\n\t\tedit : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#edit\",\n\t\tcheck : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#check\",\n\t\tdelete : resourceUrl + \"/icons/action-sprite/svg/symbols.svg#delete\",\n\t\tedit2 : resourceUrl + \"/icons/action-sprite/svg/symbols.svg#edit\",\n\t\tapproval : resourceUrl + \"/icons/action-sprite/svg/symbols.svg#approval\",\n\t\tretweet : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#retweet\",\n\t\thelp : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#help\",\n\t\tleft_align_text : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#left_align_text\",\n\t\tnews : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#news\",\n\t\timage : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#image\",\n\t\tenvironment_hub : resourceUrl + \"/icons/standard-sprite/svg/symbols.svg#environment_hub\",\n\t\ttask : resourceUrl + \"/icons/standard-sprite/svg/symbols.svg#task\",\n\t\trecord : resourceUrl + \"/icons/standard-sprite/svg/symbols.svg#record\",\n\t\tnote : resourceUrl + \"/icons/standard-sprite/svg/symbols.svg#note\"\n\t};\n\t$scope.taskDetailMessage = '';\n\t$scope.listMessage = '';\n\t$scope.displayListCompletionWarning = false;\n\t$scope.displayNoteModal = false;\n\t$scope.contactOptions = [];\n\t$scope.formValidator = {\n\t\tTarget_Date__c : {\n\t\t\tmessage : 'Invalid MM/DD/YYYY date'\n\t\t}\n\t};\n\n\t$scope.addSpinningJob = function() {\n\t\t$scope.spinner.display = true;\n\t\t$scope.spinner.jobCount++;\n\t};\n\n\t$scope.removeSpinningJob = function() {\n\t\t$scope.spinner.jobCount--;\n\t\t$scope.spinner.display = $scope.spinner.jobCount > 0;\n\t};\n\n\t$scope.validateListCompletion = function() {\n\t\tvar isValid = true;\n\t\t$scope.listMessage = '';\n\t\t_.each($scope.listWrapper.phaseWrappers, function(phaseWrapper) {\n\t\t\t_.each(phaseWrapper.taskWrappers, function(taskWrapper) {\n\t\t\t\tif (taskWrapper.task.Status__c == 'Not Completed' || taskWrapper.task.Status__c == 'Not Reviewed') {\n\t\t\t\t\tisValid = false;\n\t\t\t\t\t$scope.listMessage = 'All tasks must be completed before completing the list';\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\treturn isValid;\n\t};\n\n\t$scope.saveListCompletion = function() {\n\t\t$scope.displayListCompletionWarning = false;\n\t\t$scope.addSpinningJob();\n\t\tInstallationTaskListController.completeTaskList($scope.listWrapper.taskList,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\t$scope.init();\n\t\t\t\t\t}\n\t\t\t\t\t$scope.removeSpinningJob();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.cancelListCompletion = function() {\n\t\t$scope.displayListCompletionWarning = false;\n\t};\n\n\t$scope.warnListCompletion = function() {\n\t\tif ($scope.validateListCompletion()) {\n\t\t\t$scope.displayListCompletionWarning = true;\n\t\t}\n\t};\n\n\t$scope.validatePrereqCompletion = function() {\n\t\tvar isValid = true;\n\t\t$scope.taskDetailMessage = '';\n\t\tif (($scope.taskWrapperDetail.task.Status__c == 'Completed' || $scope.taskWrapperDetail.task.Status__c == 'Reviewed') \n\t\t\t&& $scope.taskWrapperDetail.prereqTaskName && !$scope.taskWrapperDetail.prereqTaskCompleted) {\n\t\t\tisValid = false;\n\t\t\t$scope.taskDetailMessage = \"ERROR: The <i>\" + $scope.taskWrapperDetail.prereqTaskName + \"</i> task must be completed prior to completing this task\";\n\t\t\tswitch ($scope.taskWrapperDetail.task.Status__c) {\n\t\t\t\tcase 'Completed':\n\t\t\t\t\t$scope.taskWrapperDetail.task.Status__c = 'Not Completed';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Reviewed':\n\t\t\t\t\t$scope.taskWrapperDetail.task.Status__c = 'Not Reviewed';\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn isValid;\n\t};\n\n\t$scope.clearValidation = function() {\n\t\t_.each(_.values($scope.formValidator), function(valObj) {\n\t\t\tdelete valObj.error;\n\t\t});\n\t};\n\n\t$scope.updateTaskStatus = function() {\n\t\tif ($scope.validatePrereqCompletion()) {\n\t\t\t$scope.saveTask();\n\t\t}\n\t};\n\n\t$scope.updateTaskTargetDate = function() {\n\t\t$scope.clearValidation();\n\t\tif ($scope.taskWrapperDetailHelper.Target_Date__c) {\n\t\t\tif (!$scope.taskWrapperDetailHelper.Target_Date__c.match(/^((1[0-2])|(0[1-9])|([1-9]))\\/((3[0-1])|([1-2][0-9])|(0[1-9])|([1-9]))\\/(\\d{4})$/g)) {\n\t\t\t\t$scope.formValidator.Target_Date__c.error = true;\n\t\t\t\t$scope.formValidator.Target_Date__c.message = 'Invalid MM/DD/YYYY date';\n\t\t\t} else {\n\t\t\t\tvar targetDate = new Date($scope.taskWrapperDetailHelper.Target_Date__c);\n\t\t\t\tif (!_.isDate(targetDate)) {\n\t\t\t\t\t$scope.formValidator.Target_Date__c.error = true;\n\t\t\t\t\t$scope.formValidator.Target_Date__c.message = 'Invalid MM/DD/YYYY date';\n\t\t\t\t} else {\n\t\t\t\t\t$scope.taskWrapperDetail.task.Target_Date__c = dateService.convertToSFDCSafeString($scope.taskWrapperDetailHelper.Target_Date__c);\n\t\t\t\t\t$scope.saveTask();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\t$scope.saveTask = function() {\n\t\t$scope.addSpinningJob();\n\t\t$scope.taskWrapperDetail.task.Task_Name__c = componentService.removeEscapedCharacters($scope.taskWrapperDetail.task.Task_Name__c);\n\t\t$scope.taskWrapperDetail.task.Editing_Roles__c = componentService.removeEscapedCharacters($scope.taskWrapperDetail.task.Editing_Roles__c);\n\t\t$scope.taskWrapperDetail.task.Description__c = componentService.removeEscapedCharacters($scope.taskWrapperDetail.task.Description__c);\n\t\t$scope.taskWrapperDetail.task.Group_Responsible__c = componentService.removeEscapedCharacters($scope.taskWrapperDetail.task.Group_Responsible__c);\n\t\tInstallationTaskListController.saveTask($scope.taskWrapperDetail.task,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\t$scope.getTaskList();\n\t\t\t\t\t}\n\t\t\t\t\t$scope.removeSpinningJob();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.displayTaskDetails = function(taskWrapper) {\n\t\t$scope.taskWrapperDetail = taskWrapper;\n\t\t$scope.taskWrapperDetailHelper = {};\n\t\tif ($scope.taskWrapperDetail.task.Target_Date__c) {\n\t\t\t$scope.taskWrapperDetailHelper.Target_Date__c = dateService.convertToDateString($scope.taskWrapperDetail.task.Target_Date__c);\n\t\t}\n\t\t$scope.taskDetailMessage = '';\n\t};\n\n\t$scope.viewNote = function(noteWrapper, canCreateNotes) {\n\t\t$scope.displayNoteModal = true;\n\t\t$scope.$broadcast('viewNoteModal-broadcast', {\n\t\t\tnoteWrapper : noteWrapper,\n\t\t\tcanCreateNotes : canCreateNotes\n\t\t});\n\t};\n\n\t$scope.switchLists = function() {\n\t\t$scope.taskWrapperDetail = {};\n\t\t$scope.getTaskList();\n\t};\n\n\t$scope.getTaskList = function() {\n\t\t$scope.listMessage = '';\n\t\t$scope.taskDetailMessage = '';\n\t\t$scope.addSpinningJob();\n\t\tInstallationTaskListController.getTaskList($scope.vars.taskListId,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\t$scope.listWrapper = result;\n\t\t\t\t\t\t_.each($scope.listWrapper.phaseWrappers, function(phaseWrapper) {\n\t\t\t\t\t\t\t_.each(phaseWrapper.taskWrappers, function(taskWrapper) {\n\t\t\t\t\t\t\t\ttaskWrapper.task.Available_Statuses__c = componentService.fixStatuses(taskWrapper.task.Available_Statuses__c);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif ($scope.taskWrapperDetail.task) {\n\t\t\t\t\t\t\t$scope.vars.taskId = $scope.taskWrapperDetail.task.Id;\t\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ($scope.vars.taskId) {\n\t\t\t\t\t\t\tvar taskWrapper;\n\t\t\t\t\t\t\t_.filter($scope.listWrapper.phaseWrappers, function(phaseWrapper) {\n\t\t\t\t\t\t\t\tvar result = _.filter(phaseWrapper.taskWrappers, function(taskWrapper) {\n\t\t\t\t\t\t\t\t\treturn taskWrapper.task.Id == $scope.vars.taskId;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tif (result.length > 0) {\n\t\t\t\t\t\t\t\t\ttaskWrapper = result[0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn result.length > 0;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$scope.displayTaskDetails(taskWrapper);\n\t\t\t\t\t\t\tdelete $scope.vars.taskId;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t$scope.removeSpinningJob();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.getAllTaskLists = function() {\n\t\t$scope.addSpinningJob();\n\t\tInstallationTaskListController.getAllTaskLists($scope.planId,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\t$scope.allTaskLists = result;\n\t\t\t\t\t}\n\t\t\t\t\t$scope.removeSpinningJob();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.getContactOptions = function() {\n\t\t$scope.addSpinningJob();\n\t\tInstallationTaskListController.getContactOptions($scope.planId,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\t$scope.contactOptions = result;\n\t\t\t\t\t}\n\t\t\t\t\t$scope.removeSpinningJob();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.newNote = function(taskId) {\n\t\t$scope.displayNoteModal = true;\n\t\t$scope.$broadcast('createNoteModal-broadcast', {\n\t\t\ttaskId : taskId\n\t\t});\n\t};\n\n\t$scope.$on('closeNoteModal-emit', function(event, values) {\n\t\t$scope.displayNoteModal = false;\n\t});\n\n\t$scope.$on('createNoteAndText-emit', function(event, values) {\n\t\t$scope.addSpinningJob();\n\t\tvar noteWrapperJSON = angular.toJson(values.noteWrapper);\n\t\tvar noteWrapper = $.parseJSON(noteWrapperJSON);\n\t\tnoteWrapper.note.Plan__c = $scope.planId;\n\t\tif (noteWrapper.note.Use_Warning__c && noteWrapper.note.Expire_on__c) {\n\t\t\tnoteWrapper.note.Expire_on__c = dateService.convertToSFDCSafeString(noteWrapper.note.Expire_on__c);\n\t\t} else {\n\t\t\tdelete noteWrapper.note.Expire_on__c;\n\t\t}\n\t\tInstallationTaskListController.saveNote(noteWrapper,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\tvalues.textWrapper.text.Plan_Notes__c = result.id;\n\t\t\t\t\t\t\t$scope.saveNoteText(values.textWrapper, values.taskId);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$scope.removeSpinningJob();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t});\n\n\t$scope.$on('createText-emit', function(event, values) {\n\t\t$scope.saveNoteText(values.textWrapper, values.taskId);\n\t});\n\n\t$scope.$on('createIssue-emit', function(event, values) {\n\t\t$scope.addSpinningJob();\n\t\tvar issueWrapperJSON = angular.toJson(values.issueWrapper);\n  \t\tvar issueWrapper = $.parseJSON(issueWrapperJSON);\n  \t\tissueWrapper.issue.Discovered__c = dateService.convertToSFDCSafeString(issueWrapper.issue.Discovered__c);\n  \t\tissueWrapper.issue.Resolved__c = dateService.convertToSFDCSafeString(issueWrapper.issue.Resolved__c);\n\t\tInstallationTaskListController.saveNoteIssue(issueWrapper,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\t$scope.getTask(values.taskId);\n\t\t\t\t\t\t$scope.displayNoteModal = false;\n\t\t\t\t\t}\n\t\t\t\t\t$scope.removeSpinningJob();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t});\n\n\t$scope.saveNoteText = function(textWrapper, taskId) {\n\t\t$scope.addSpinningJob();\n\t\tInstallationTaskListController.saveNoteText(textWrapper,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\t$scope.getTask(taskId);\n\t\t\t\t\t\t$scope.displayNoteModal = false;\n\t\t\t\t\t}\n\t\t\t\t\t$scope.removeSpinningJob();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.getTask = function(taskId) {\n\t\t$scope.addSpinningJob();\n\t\tInstallationTaskListController.getTask(taskId,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\t$scope.taskWrapperDetail = result;\n\t\t\t\t\t\t$scope.taskWrapperDetail.task.Available_Statuses__c = componentService.fixStatuses($scope.taskWrapperDetail.task.Available_Statuses__c);\n\t\t\t\t\t\tvar taskWrapper;\n\t\t\t\t\t\t_.each($scope.listWrapper.phaseWrappers, function(phaseWrapper, phaseIndex) {\n\t\t\t\t\t\t\t_.each(phaseWrapper.taskWrappers, function(taskWrapper, taskIndex) {\n\t\t\t\t\t\t\t\tif (taskWrapper.task.Id == $scope.taskWrapperDetail.task.Id) {\n\t\t\t\t\t\t\t\t\t$scope.listWrapper.phaseWrappers[phaseIndex].taskWrappers[taskIndex] = $scope.taskWrapperDetail;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t$scope.removeSpinningJob();\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.goToPlan = function() {\n\t\t$window.location.href = '/' + $scope.planId;\n\t};\n\n\t$scope.init = function() {\n\t\t$scope.taskWrapperDetail = {};\n\t\t$scope.getTaskList();\n\t\t$scope.getAllTaskLists();\n\t\t$scope.getContactOptions();\n\t};\n\t$scope.init();\n}]);","var app = angular.module(\"itlApp\");\n\napp.controller(\"taskModalController\", [\"$scope\", \"componentService\", function($scope, componentService) {\n\t$scope.modalTask = {};\n\t$scope.modalTaskHelper = {};\n\t$scope.modalTaskWrapper = {};\n\t$scope.modalTaskWrapperHelper = {};\n\t$scope.displayReusableAttributes = true;\n\t$scope.displaySpecificAttributes = false;\n\t$scope.formValidator = {\n\t\tform: {\n\t\t\tmessage: 'An error occurred. Please try again.'\n\t\t}\n\t};\n\t$scope.formValidatorReusableAttributes = {\n\t\tTask_Name__c: {\n\t\t\tmessage: 'Name is required'\n\t\t},\n\t\tStatuses__c: {\n\t\t\tmessage: 'Statuses is required'\n\t\t},\n\t\tGroup_Responsible__c: {\n\t\t\tmessage: 'Group Responsible is required'\n\t\t},\n\t\tEditing_Roles__c: {\n\t\t\tmessage: 'At least one Editing Role is required'\n\t\t}\n\t};\n\t$scope.formValidatorSpecificAttributes = {\n\t\ttargetDateTaskIndex: {\n\t\t\tmessage: 'Target Date Task is required'\n\t\t}\n\t};\n\t$scope.otherTasks = [];\n\n\t$scope.next = function() {\n\t\tif (!$scope.validateFormReusableAttributes()) {\n\t\t\t$scope.displayReusableAttributes = false;\n\t\t\t$scope.displaySpecificAttributes = true;\n\t\t}\n\t};\n\n\t$scope.previous = function() {\n\t\t$scope.displayReusableAttributes = true;\n\t\t$scope.displaySpecificAttributes = false;\n\t};\n\n\t$scope.$on(\"taskCreate-broadcast\", function(event, values) {\n\t\t$scope.modalTask = {\n\t\t\tPhase_Template__c: values.phase.Id,\n\t\t\tPhase_Template__r: {\n\t\t\t\tPhase_Name__c: values.phase.Phase_Name__c\n\t\t\t}\n\t\t};\n\t\t$scope.modalTaskHelper = {};\n\t\t$scope.modalTaskWrapper = {\n\t\t\tassociation: {}\n\t\t};\n\t\t$scope.modalTaskWrapperHelper = {};\n\t\tif (values.taskList) {\n\t\t\t$scope.otherTasks = values.taskList;\n\t\t}\n\t\t$scope.clearValidation($scope.formValidator);\n\t\t$scope.clearValidation($scope.formValidatorReusableAttributes);\n\t\t$scope.clearValidation($scope.formValidatorSpecificAttributes);\n\t\t$scope.displayReusableAttributes = true;\n\t\t$scope.displaySpecificAttributes = false;\n\t});\n\n\t$scope.setEditingRolesCheckboxes = function() {\n\t\tif ($scope.modalTask.Editing_Roles__c) {\n\t\t\tvar editingRoles = $scope.modalTask.Editing_Roles__c.split(';');\n\t\t\t_.each(editingRoles, function(role) {\n\t\t\t\t$scope.modalTaskHelper[role] = true;\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.$on(\"taskEdited-broadcast\", function(event, values) {\n\t\t$scope.modalTask = values.task;\n\t\t$scope.modalTask.Phase_Template__r = {\n\t\t\tPhase_Name__c : values.phase.Phase_Name__c\n\t\t};\n\t\t$scope.modalTask.Editing_Roles__c = componentService.removeEscapedCharacters($scope.modalTask.Editing_Roles__c);\n\t\t$scope.modalTask.Task_Name__c = componentService.removeEscapedCharacters($scope.modalTask.Task_Name__c);\n\t\t$scope.modalTask.Description__c = componentService.removeEscapedCharacters($scope.modalTask.Description__c);\n\t\t$scope.setEditingRolesCheckboxes();\n\t\t$scope.modalTaskWrapper = values.taskWrapper;\n\t\tif (values.taskList) {\n\t\t\t$scope.otherTasks = _.reject(values.taskList, function(taskWrapper) {\n\t\t\t\treturn taskWrapper.templateOrderIndex == $scope.modalTaskWrapper.templateOrderIndex;\n\t\t\t});\n\t\t}\n\t\t$scope.clearValidation($scope.formValidator);\n\t\t$scope.clearValidation($scope.formValidatorReusableAttributes);\n\t\t$scope.clearValidation($scope.formValidatorSpecificAttributes);\n\t\tif (values.skipToSpecificAttributes) {\n\t\t\t$scope.displayReusableAttributes = false;\n\t\t\t$scope.displaySpecificAttributes = true;\n\t\t} else {\n\t\t\t$scope.displayReusableAttributes = true;\n\t\t\t$scope.displaySpecificAttributes = false;\n\t\t}\n\t\tif (!_.isUndefined($scope.modalTaskWrapper.prereqTaskIndex)) {\n\t\t\t$scope.modalTaskWrapper.prereqTaskIndex = \"\" + $scope.modalTaskWrapper.prereqTaskIndex;\n\t\t}\n\t\tif (!_.isUndefined($scope.modalTaskWrapper.targetDateTaskIndex)) {\n\t\t\t$scope.modalTaskWrapper.targetDateTaskIndex = \"\" + $scope.modalTaskWrapper.targetDateTaskIndex;\n\t\t}\n\t});\n\n\t$scope.$on(\"taskModal-displayError\", function(event, values) {\n\t\t$scope.displayRemoteError(values.message);\n\t});\n\n\t$scope.clearValidation = function(formValidator) {\n\t\t_.each(_.values(formValidator), function(valObj) {\n\t\t\tdelete valObj.error;\n\t\t});\n\t};\n\n\t$scope.validateFormReusableAttributes = function() {\n\t\t$scope.clearValidation($scope.formValidator);\n\t\t$scope.clearValidation($scope.formValidatorReusableAttributes);\n\t\t$scope.formValidatorReusableAttributes.Task_Name__c.error = _.isEmpty($scope.modalTask.Task_Name__c);\n\t\t$scope.formValidatorReusableAttributes.Statuses__c.error = _.isEmpty($scope.modalTask.Statuses__c);\n\t\t$scope.formValidatorReusableAttributes.Group_Responsible__c.error = _.isEmpty($scope.modalTask.Group_Responsible__c);\n\t\t$scope.formValidatorReusableAttributes.Editing_Roles__c.error = _.isEmpty($scope.modalTask.Editing_Roles__c);\n\n\t\tvar errors = _.where(_.values($scope.formValidatorReusableAttributes), {error:true});\n\t\treturn errors.length > 0;\n\t};\n\n\t$scope.validateFormSpecificAttributes = function() {\n\t\t$scope.clearValidation($scope.formValidator);\n\t\t$scope.clearValidation($scope.formValidatorSpecificAttributes);\n\t\tif ($scope.modalTaskWrapper.association.Target_Date_Based_On__c == 'Task Completion Date') {\n\t\t\t$scope.formValidatorSpecificAttributes.targetDateTaskIndex.error = _.isEmpty($scope.modalTaskWrapper.targetDateTaskIndex);\n\t\t}\n\n\t\tvar errors = _.where(_.values($scope.formValidatorSpecificAttributes), {error:true});\n\t\treturn errors.length > 0;\n\t};\n\n\t$scope.handleSaveModalTask = function() {\n\t\tif (!$scope.validateFormSpecificAttributes()) {\n\t\t\t$scope.saveModalTask();\n\t\t}\n\t};\n\n\t$scope.displayRemoteError = function(message) {\n\t\t$scope.formValidator.form.message = 'An error occurred. Please try again.';\n\t\tif (message) {\n\t\t\t$scope.formValidator.form.message = message;\n\t\t}\n\t\t$scope.formValidator.form.error = true;\n\t\t$scope.helper.formReady = true;\n\t};\n\n\t$scope.saveModalTask = function() {\n\t\tif ($scope.modalTask.Id) {\n\t\t\t$scope.$emit(\"saveModalTask\", {\n\t\t\t\ttask: $scope.modalTask,\n\t\t\t\ttaskWrapper: $scope.modalTaskWrapper\n\t\t\t});\n\t\t} else {\n\t\t\t$scope.$emit(\"createModalTask\", {\n\t\t\t\ttask: $scope.modalTask,\n\t\t\t\ttaskWrapper: $scope.modalTaskWrapper\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.cancelModalTask = function() {\n\t\t$scope.modalTask = {};\n\t\t$scope.modalTaskHelper = {};\n\t\t$scope.modalTaskWrapper = {\n\t\t\tassociation: {}\n\t\t};\n\t\t$scope.modalTaskWrapperHelper = {};\n\t\t$scope.otherTasks = [];\n\t\t$scope.displayReusableAttributes = true;\n\t\t$scope.displaySpecificAttributes = false;\n\t\t$scope.$emit(\"cancelModalTask\");\n\t};\n\n\t$scope.updateEditingRoles = function() {\n\t\t$scope.modalTask.Editing_Roles__c = '';\n\t\tvar editingRoles = [];\n\t\tvar helperKeys = _.keys($scope.modalTaskHelper);\n\t\t_.each(helperKeys, function(key) {\n\t\t\tif ($scope.modalTaskHelper[key]) {\n\t\t\t\teditingRoles.push(key);\n\t\t\t}\n\t\t});\n\t\t$scope.modalTask.Editing_Roles__c = editingRoles.join(';');\n\t};\n\n\t$scope.$watchCollection('modalTaskHelper', function() {\n\t\t$scope.updateEditingRoles();\n\t});\n\n}]);","var app = angular.module(\"itlApp\");\n\napp.controller('templateController', ['$scope', '$routeParams', '$window', 'componentService', function($scope, $routeParams, $window, componentService) {\n\t$scope.helper = {\n\t\tformReady : false,\n\t\tshowPhaseEditModal: false,\n\t\tshowTaskEditModal: false\n\t};\n\t$scope.resourceUrl = resourceUrl;\n\t$scope.templateId = templateId;\n\t$scope.template = {};\n\t$scope.xlinkHelper = {\n\t\tadd : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#add\",\n\t\tedit : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#edit\",\n\t\tcheck : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#check\",\n\t\tdelete : resourceUrl + \"/icons/action-sprite/svg/symbols.svg#delete\",\n\t\tedit2 : resourceUrl + \"/icons/action-sprite/svg/symbols.svg#edit\",\n\t\tretweet : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#retweet\",\n\t\thelp : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#help\",\n\t\tleft_align_text : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#left_align_text\",\n\t\tnews : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#news\",\n\t\timage : resourceUrl + \"/icons/utility-sprite/svg/symbols.svg#image\",\n\t\tenvironment_hub : resourceUrl + \"/icons/standard-sprite/svg/symbols.svg#environment_hub\",\n\t\ttask : resourceUrl + \"/icons/standard-sprite/svg/symbols.svg#task\"\n\t};\n\t$scope.availableTasks = [];\n\t$scope.availablePhases = [];\n\t$scope.taskModalTemplate = resourceUrl + '/partials/taskModal.html';\n\t$scope.phaseModalTemplate = resourceUrl + '/partials/phaseModal.html';\n\t$scope.templateTemplate = resourceUrl + '/partials/template.html';\n\t$scope.templateEditMode = false;\n\t$scope.taskList = [];\n\t$scope.errorMessage = '';\n\t$scope.addPhaseModal = {};\n\t$scope.addTaskModal = {};\n\n\t$scope.init = function() {\n\t\t$scope.getTemplate();\n\t\t$scope.getLibrary();\n\t};\n\n\t$scope.switchTab = function(tabName) {\n\t\t$(\".slds-tabs__item\").removeClass(\"slds-active\");\n\t\t$(\".slds-tabs__content\").removeClass(\"slds-show\");\n\t\t$(\".slds-tabs__content\").addClass(\"slds-hide\");\n\t\t$(\".\" + tabName + \"--tab\").addClass(\"slds-active\");\n\t\t$(\".\" + tabName + \"--panel\").removeClass(\"slds-hide\");\n\t\t$(\".\" + tabName + \"--panel\").addClass(\"slds-show\");\n\t};\n\n\t$scope.toggleTemplateEdit = function() {\n\t\t$scope.templateEditMode = !$scope.templateEditMode;\n\t\tif ($scope.templateEditMode) {\n\t\t\t$(\"#template-panel\").animate({\n\t\t\t\tmarginLeft: 460\n\t\t\t});\n\t\t\t$(\"#component-list-panel\").animate({\n\t\t\t\tleft: 10\n\t\t\t});\n\t\t\t$scope.$broadcast(\"templateEditModeOn\");\n\t\t} else {\n\t\t\t$(\"#template-panel\").animate({\n\t\t\t\tmarginLeft: 0\n\t\t\t});\n\t\t\t$(\"#component-list-panel\").animate({\n\t\t\t\tleft: -450\n\t\t\t});\n\t\t\t$scope.$broadcast(\"templateEditModeOff\");\n\t\t\t$scope.destroyDragAndSort();\n\t\t}\n\t};\n\n\t$scope.updateTaskList = function() {\n\t\t$scope.taskList = [];\n\t\tif ($scope.template.phaseWrappers) {\n\t\t\t_.each($scope.template.phaseWrappers, function(phaseWrapper) {\n\t\t\t\tif (phaseWrapper.taskWrappers) {\n\t\t\t\t\t_.each(phaseWrapper.taskWrappers, function(taskWrapper) {\n\t\t\t\t\t\t$scope.taskList.push(taskWrapper);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tif ($scope.taskList.length > 0) {\n\t\t\tvar prereqMap = {};\n\t\t\tvar targetMap = {};\n\t\t\tvar existingIndexes = [];\n\t\t\t_.each($scope.taskList, function(taskWrapper) {\n\t\t\t\tif (taskWrapper.templateOrderIndex) {\n\t\t\t\t\texistingIndexes.push(\"\" + taskWrapper.templateOrderIndex);\n\t\t\t\t}\n\t\t\t\tif (taskWrapper.prereqTaskIndex) {\n\t\t\t\t\tvar indexString = \"\" + taskWrapper.prereqTaskIndex;\n\t\t\t\t\tif (_.isUndefined(prereqMap[indexString])) {\n\t\t\t\t\t\tprereqMap[indexString] = [];\n\t\t\t\t\t}\n\t\t\t\t\tprereqMap[indexString].push(taskWrapper);\n\t\t\t\t}\n\t\t\t\tif (taskWrapper.targetDateTaskIndex) {\n\t\t\t\t\tvar indexString = \"\" + taskWrapper.targetDateTaskIndex;\n\t\t\t\t\tif (_.isUndefined(targetMap[indexString])) {\n\t\t\t\t\t\ttargetMap[indexString] = [];\n\t\t\t\t\t}\n\t\t\t\t\ttargetMap[indexString].push(taskWrapper);\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar prereqKeys = _.keys(prereqMap);\n\t\t\tvar deletedPrereqKeys = _.difference(prereqKeys, existingIndexes);\n\t\t\t_.each(deletedPrereqKeys, function(deletedKey) {\n\t\t\t\t_.each(prereqMap[deletedKey], function(taskWrapper) {\n\t\t\t\t\tdelete taskWrapper.prereqTaskIndex;\n\t\t\t\t});\n\t\t\t\tdelete prereqMap[deletedKey];\n\t\t\t});\n\n\t\t\tvar targetKeys = _.keys(targetMap);\n\t\t\tvar deletedTargetKeys = _.difference(targetKeys, existingIndexes);\n\t\t\t_.each(deletedTargetKeys, function(deletedKey) {\n\t\t\t\t_.each(targetMap[deletedKey], function(taskWrapper) {\n\t\t\t\t\tdelete taskWrapper.targetDateTaskIndex;\n\t\t\t\t\tif (taskWrapper.association.Target_Date_Based_On__c == 'Task Completion Date') {\n\t\t\t\t\t\ttaskWrapper.association.Target_Date_Based_On__c = 'List Creation Date';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tdelete targetMap[deletedKey];\n\t\t\t});\n\n\t\t\t_.each($scope.taskList, function(taskWrapper, index) {\n\t\t\t\tif (prereqMap[taskWrapper.templateOrderIndex]) {\n\t\t\t\t\t_.each(prereqMap[taskWrapper.templateOrderIndex], function(otherTaskWrapper) {\n\t\t\t\t\t\totherTaskWrapper.prereqTaskIndex = index;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (targetMap[taskWrapper.templateOrderIndex]) {\n\t\t\t\t\t_.each(targetMap[taskWrapper.templateOrderIndex], function(otherTaskWrapper) {\n\t\t\t\t\t\totherTaskWrapper.targetDateTaskIndex = index;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\ttaskWrapper.templateOrderIndex = index;\n\t\t\t});\n\t\t}\n\t};\n\n\t$scope.formatTemplate = function() {\n\t\t$scope.template.iList.ITL_Name__c = componentService.removeEscapedCharacters($scope.template.iList.ITL_Name__c);\n\t\t_.each($scope.template.phaseWrappers, function(phaseWrapper) {\n\t\t\tphaseWrapper.association.Phase_Template__r.Phase_Name__c = componentService.removeEscapedCharacters(phaseWrapper.association.Phase_Template__r.Phase_Name__c);\n\t\t\t_.each(phaseWrapper.taskWrappers, function(taskWrapper) {\n\t\t\t\ttaskWrapper.association.Task_Template__r.Editing_Roles__c = componentService.removeEscapedCharacters(taskWrapper.association.Task_Template__r.Editing_Roles__c);\n\t\t\t\ttaskWrapper.association.Task_Template__r.Description__c = componentService.removeEscapedCharacters(taskWrapper.association.Task_Template__r.Description__c);\n\t\t\t\ttaskWrapper.association.Task_Template__r.Task_Name__c = componentService.removeEscapedCharacters(taskWrapper.association.Task_Template__r.Task_Name__c);\n\t\t\t\ttaskWrapper.association.Task_Template__r.Group_Responsible__c = componentService.removeEscapedCharacters(taskWrapper.association.Task_Template__r.Group_Responsible__c);\n\t\t\t\ttaskWrapper.association.Task_Template__r.Statuses__c = componentService.fixStatuses(taskWrapper.association.Task_Template__r.Statuses__c);\n\t\t\t});\n\t\t});\n\t};\n\n\t$scope.getTemplate = function() {\n\t\t$scope.helper.formReady = false;\n\t\tITLTemplateManager.getTemplate($scope.templateId,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\t$scope.template = result;\n\t\t\t\t\t\t$scope.formatTemplate();\n\t\t\t\t\t\t$scope.updateTaskList();\n\t\t\t\t\t\t$scope.helper.formReady = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.formatLibrary = function() {\n\t\t_.each($scope.availableTasks, function(availableTask) {\n\t\t\tavailableTask.Description__c = componentService.removeEscapedCharacters(availableTask.Description__c);\n\t\t\tavailableTask.Task_Name__c = componentService.removeEscapedCharacters(availableTask.Task_Name__c);\n\t\t\tavailableTask.Editing_Roles__c = componentService.removeEscapedCharacters(availableTask.Editing_Roles__c);\n\t\t\tavailableTask.Group_Responsible__c = componentService.removeEscapedCharacters(availableTask.Group_Responsible__c);\n\t\t\tavailableTask.Statuses__c = componentService.fixStatuses(availableTask.Statuses__c);\n\t\t});\n\t\t_.each($scope.availablePhases, function(availablePhase) {\n\t\t\tavailablePhase.Phase_Name__c = componentService.removeEscapedCharacters(availablePhase.Phase_Name__c);\n\t\t});\n\t};\n\n\t$scope.getLibrary = function() {\n\t\t$scope.helper.formReady = false;\n\t\tITLTemplateManager.getLibrary(\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t$scope.availableTasks = result.tasks;\n\t\t\t\t\t$scope.availablePhases = result.phases;\n\t\t\t\t\t$scope.formatLibrary();\n\t\t\t\t\t$scope.helper.formReady = true;\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.$on(\"phaseDeleted\", function(event, values) {\n\t\t$scope.template.phaseWrappers.splice(values.index, 1);\n\t\t$scope.updateTaskList();\n\t});\n\n\t$scope.$on(\"taskDeleted\", function(event, values) {\n\t\tvar phaseWrapper = $scope.template.phaseWrappers[values.parentIndex];\n\t\tphaseWrapper.taskWrappers.splice(values.index, 1);\n\t\t$scope.updateTaskList();\n\t});\n\n\t$scope.formatForSave = function(template) {\n\t\tif (template.phaseWrappers) {\n\t\t\t_.each(template.phaseWrappers, function(phaseWrapper, phaseIndex) {\n\t\t\t\tdelete phaseWrapper.association.Phase_Template__r;\n\t\t\t\tphaseWrapper.association.Order__c = phaseIndex;\n\t\t\t\tif (phaseWrapper.taskWrappers) {\n\t\t\t\t\t_.each(phaseWrapper.taskWrappers, function(taskWrapper, taskIndex) {\n\t\t\t\t\t\tdelete taskWrapper.association.Task_Template__r;\n\t\t\t\t\t\ttaskWrapper.association.Order__c = taskIndex;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn template;\n\t};\n\n\t$scope.saveTemplate = function() {\n\t\t$scope.helper.formReady = false;\n\t\tvar templateJSON = angular.toJson($scope.template);\n  \t\tvar template = $.parseJSON(templateJSON);\n  \t\ttemplate = $scope.formatForSave(template);\n\t\tITLTemplateManager.saveTemplate(template,\n\t\t\tfunction(result, event) {\n\t\t\t\tif (event.status) {\n\t\t\t\t\t$scope.toggleTemplateEdit();\n\t\t\t\t\t$scope.getTemplate();\n\t\t\t\t}\n\t\t\t\t$scope.helper.formReady = true;\n\t\t\t}\n\t\t);\n\t};\n\n\t$scope.showAddPhaseModal = function(index) {\n\t\t$scope.addPhaseModal = {\n\t\t\tindex : index\n\t\t};\n\t\t$scope.showPhaseEditModal();\n\t\t$scope.$broadcast(\"phaseCreate-broadcast\");\n\t};\n\n\t$scope.showAddTaskModal = function(index, subIndex) {\n\t\tvar association = $scope.template.phaseWrappers[index].association;\n\t\tvar phase = {\n\t\t\tId: association.Phase_Template__c,\n\t\t\tPhase_Name__c: association.Phase_Template__r.Phase_Name__c\n\t\t};\n\t\t$scope.addTaskModal = {\n\t\t\tindex : index,\n\t\t\tsubIndex : subIndex\n\t\t};\n\t\t$scope.showTaskEditModal();\n\t\t$scope.$broadcast(\"taskCreate-broadcast\", {\n\t\t\ttaskList: $scope.taskList,\n\t\t\tphase: phase\n\t\t});\n\t};\n\n\t$scope.$on(\"phaseEdited\", function(event, values) {\n\t\t$scope.showPhaseEditModal();\n\t\tvar association = $scope.template.phaseWrappers[values.index].association;\n\t\tvar phase = {\n\t\t\tId: association.Phase_Template__c,\n\t\t\tPhase_Name__c: association.Phase_Template__r.Phase_Name__c\n\t\t};\n\t\t$scope.$broadcast(\"phaseEdited-broadcast\", {\n\t\t\tphase: phase\n\t\t});\n\t});\n\n\t$scope.$on(\"taskEdited\", function(event, values) {\n\t\t$scope.taskEditedEventHandler(values);\n\t});\n\n\t$scope.taskEditedEventHandler = function(values) {\n\t\tvar association = $scope.template.phaseWrappers[values.parentIndex].association;\n\t\tvar phase = {\n\t\t\tId: association.Phase_Template__c,\n\t\t\tPhase_Name__c: association.Phase_Template__r.Phase_Name__c\n\t\t};\n\t\t$scope.showTaskEditModal();\n\t\tvar phaseWrapper = $scope.template.phaseWrappers[values.parentIndex];\n\t\tvar taskWrapper = phaseWrapper.taskWrappers[values.index];\n\t\tvar task = _.clone(taskWrapper.association.Task_Template__r);\n\t\ttask.Id = taskWrapper.association.Task_Template__c;\n\t\tvar v_taskWrapper = _.clone(taskWrapper);\n\t\tv_taskWrapper.association = _.clone(taskWrapper.association);\n\t\tdelete v_taskWrapper.association.Task_Template__r;\n\t\t$scope.addTaskModal = {\n\t\t\tindex : values.parentIndex,\n\t\t\tsubIndex : values.index\n\t\t};\n\t\t$scope.$broadcast(\"taskEdited-broadcast\", {\n\t\t\ttask: task,\n\t\t\tphase: phase,\n\t\t\ttaskWrapper: v_taskWrapper,\n\t\t\ttaskList: $scope.taskList,\n\t\t\tskipToSpecificAttributes: values.skipToSpecificAttributes\n\t\t});\n\t};\n\n\t$scope.showPhaseEditModal = function() {\n\t\t$scope.helper.showPhaseEditModal = true;\n\t};\n\n\t$scope.closePhaseEditModal = function() {\n\t\t$scope.helper.showPhaseEditModal = false;\n\t};\n\n\t$scope.showTaskEditModal = function() {\n\t\t$scope.helper.showTaskEditModal = true;\n\t};\n\n\t$scope.closeTaskEditModal = function() {\n\t\t$scope.helper.showTaskEditModal = false;\n\t};\n\n\t$scope.$on(\"createModalPhase\", function(event, values) {\n\t\t$scope.helper.formReady = false;\n\t\tITLTemplateManager.savePhase(values.phase,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\tvar association = {\n\t\t\t\t\t\t\t\tOrder__c : $scope.addPhaseModal.index,\n\t\t\t\t\t\t\t\tPhase_Template__c : result.id,\n\t\t\t\t\t\t\t\tList_Template__c : $scope.templateId,\n\t\t\t\t\t\t\t\tPhase_Template__r : {}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t_.extend(association.Phase_Template__r, values.phase);\n\t\t\t\t\t\t\tvar phaseWrapper = {\n\t\t\t\t\t\t\t\tassociation : association,\n\t\t\t\t\t\t\t\ttaskWrappers : []\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t$scope.template.phaseWrappers.splice(phaseWrapper.association.Order__c, 0, phaseWrapper);\n\t\t\t\t\t\t\t$scope.updateTaskList();\n\t\t\t\t\t\t\t$scope.$broadcast('phaseAddedToTemplate', {\n\t\t\t\t\t\t\t\tphaseId : phaseWrapper.association.Phase_Template__c\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$scope.closePhaseEditModal();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$scope.$broadcast('phaseModal-displayError');\n\t\t\t\t\t\t\t$scope.helper.formReady = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$scope.getLibrary();\n\t\t\t}\n\t\t);\n\t});\n\n\t$scope.$on(\"saveModalPhase\", function(event, values) {\n\t\t$scope.helper.formReady = false;\n\t\tITLTemplateManager.savePhase(values.phase,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\tif (result.success) {\n\t\t\t\t\t\t\tvar phase = _.clone(values.phase);\n\t\t\t\t\t\t\tvar phaseId = phase.Id;\n\t\t\t\t\t\t\tdelete phase.Id;\n\t\t\t\t\t\t\tdelete phase.$$hashKey;\n\t\t\t\t\t\t\tvar associations = _.filter($scope.template.phaseWrappers, function(phaseWrapper) {\n\t\t\t\t\t\t\t\treturn phaseWrapper.association.Phase_Template__c == phaseId;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t_.each(associations, function(association, index) {\n\t\t\t\t\t\t\t\t_.extend(association.Phase_Template__r, phase);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t$scope.closePhaseEditModal();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.$broadcast('phaseModal-displayError');\n\t\t\t\t\t\t$scope.helper.formReady = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$scope.getLibrary();\n\t\t\t}\n\t\t);\n\t});\n\n\t$scope.$on(\"cancelModalPhase\", function() {\n\t\t$scope.closePhaseEditModal();\n\t});\n\n\t$scope.$on(\"createModalTask\", function(event, values) {\n\t\t$scope.helper.formReady = false;\n\t\tdelete values.task.Phase_Template__r;\n\t\tITLTemplateManager.saveTask(values.task,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\tif (result.success) {\n\n\t\t\t\t\t\t\tvar phaseWrapper = $scope.template.phaseWrappers[$scope.addTaskModal.index];\n\t\t\t\t\t\t\tvar taskWrapper = _.clone(values.taskWrapper);\n\t\t\t\t\t\t\ttaskWrapper.association = {};\n\t\t\t\t\t\t\t_.extend(taskWrapper.association, values.taskWrapper.association);\n\t\t\t\t\t\t\ttaskWrapper.association.List_Template__c = $scope.templateId;\n\t\t\t\t\t\t\ttaskWrapper.association.Task_Template__c = result.id;\n\t\t\t\t\t\t\ttaskWrapper.association.Order__c = $scope.addTaskModal.subIndex;\n\t\t\t\t\t\t\ttaskWrapper.association.Task_Template__r = {};\n\t\t\t\t\t\t\t_.extend(taskWrapper.association.Task_Template__r, values.task);\n\n\t\t\t\t\t\t\tif (!phaseWrapper.taskWrappers) {\n\t\t\t\t\t\t\t\tphaseWrapper.taskWrappers = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tphaseWrapper.taskWrappers.splice(taskWrapper.association.Order__c, 0, taskWrapper);\n\t\t\t\t\t\t\t$scope.updateTaskList();\n\t\t\t\t\t\t\t$scope.closeTaskEditModal();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$scope.$broadcast('taskModal-displayError', {});\n\t\t\t\t\t\t\t$scope.helper.formReady = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.$broadcast('taskModal-displayError', {});\n\t\t\t\t\t\t$scope.helper.formReady = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$scope.getLibrary();\n\t\t\t}\n\t\t);\n\t});\n\n\t$scope.$on(\"saveModalTask\", function(event, values) {\n\t\t$scope.helper.formReady = false;\n\t\tITLTemplateManager.saveTask(values.task,\n\t\t\tfunction(result, event) {\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\tif (event.status) {\n\t\t\t\t\t\tif (result.success) {\n\n\t\t\t\t\t\t\tvar v_taskWrapper = _.clone(values.taskWrapper);\n\t\t\t\t\t\t\tdelete v_taskWrapper.$$hashKey;\n\n\t\t\t\t\t\t\tvar taskAssociation = _.clone(values.taskWrapper.association);\n\t\t\t\t\t\t\tdelete taskAssociation.$$hashKey;\n\t\t\t\t\t\t\tvar phaseWrapper = $scope.template.phaseWrappers[$scope.addTaskModal.index];\n\t\t\t\t\t\t\tvar taskWrapper = phaseWrapper.taskWrappers[$scope.addTaskModal.subIndex];\n\t\t\t\t\t\t\t_.extend(taskWrapper, v_taskWrapper);\n\t\t\t\t\t\t\t_.extend(taskWrapper.association, taskAssociation);\n\n\t\t\t\t\t\t\tvar task = _.clone(values.task);\n\t\t\t\t\t\t\tvar taskId = task.Id;\n\t\t\t\t\t\t\tdelete task.Id;\n\t\t\t\t\t\t\tdelete task.$$hashKey;\n\t\t\t\t\t\t\t_.each($scope.template.phaseWrappers, function(phaseWrapper) {\n\t\t\t\t\t\t\t\t_.each(phaseWrapper.taskWrappers, function(taskWrapper) {\n\t\t\t\t\t\t\t\t\tif (taskWrapper.association.Task_Template__c == taskId) {\n\t\t\t\t\t\t\t\t\t\ttaskWrapper.association.Task_Template__r = {};\n\t\t\t\t\t\t\t\t\t\t_.extend(taskWrapper.association.Task_Template__r, task);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t$scope.closeTaskEditModal();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$scope.$broadcast('taskModal-displayError');\n\t\t\t\t\t\t$scope.helper.formReady = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$scope.getLibrary();\n\t\t\t}\n\t\t);\n\t});\n\n\t$scope.$on(\"cancelModalTask\", function() {\n\t\t$scope.closeTaskEditModal();\n\t});\n\n\t$scope.destroyDragAndSort = function() {\n\t\tif ($(\".template-components\").data('ui-sortable')) {\n\t\t\t$(\".template-components\").sortable(\"destroy\");\n\t\t}\n\t\tif ($(\".recurring-set-components\").data('ui-sortable')) {\n\t\t\t$(\".recurring-set-components\").sortable(\"destroy\");\n\t\t}\n\t\tif ($(\".available-component\").data('ui-draggable')) {\n\t\t\t$(\".available-component\").draggable(\"destroy\");\n\t\t}\n\t};\n\n\t$scope.$on(\"phaseAndTaskAdded\", function(event, values) {\n\t\tvar phase = _.where($scope.availablePhases, {Id: values.phaseId});\n\t\tphase = _.clone(phase[0]);\n\t\tvar association = {\n\t\t\tPhase_Template__c : phase.Id,\n\t\t\tOrder__c : values.to,\n\t\t\tList_Template__c : $scope.templateId,\n\t\t\tPhase_Template__r : {}\n\t\t};\n\t\tdelete phase.Id;\n\t\tdelete phase.$$hashKey;\n\t\t_.extend(association.Phase_Template__r, phase);\n\t\tvar phaseWrapper = {\n\t\t\tassociation : association,\n\t\t\ttaskWrappers : []\n\t\t};\n\t\t$scope.template.phaseWrappers.splice(association.Order__c, 0, phaseWrapper);\n\t\t$scope.$broadcast('phaseAddedToTemplate', {\n\t\t\tphaseId : phaseWrapper.association.Phase_Template__c\n\t\t});\n\n\t\tvar task = _.where($scope.availableTasks, {Id: values.taskId});\n\t\ttask = _.clone(task[0]);\n\t\tvar taskWrapper = {\n\t\t\tassociation : {\n\t\t\t\tTask_Template__c : task.Id,\n\t\t\t\tList_Template__c : $scope.templateId,\n\t\t\t\tOrder__c : 0,\n\t\t\t\tTask_Template__r : {}\n\t\t\t}\n\t\t};\n\t\tdelete task.Id;\n\t\tdelete task.$$hashKey;\n\t\t_.extend(taskWrapper.association.Task_Template__r, task);\n\t\tphaseWrapper.taskWrappers.splice(taskWrapper.association.Order__c, 0, taskWrapper);\n\t\t$scope.updateTaskList();\n\n\t\tvar eventValues = {\n\t\t\tparentIndex : values.to,\n\t\t\tindex : taskWrapper.association.Order__c,\n\t\t\tskipToSpecificAttributes : true\n\t\t};\n\t\t$scope.taskEditedEventHandler(eventValues);\n\t});\n\n\t$scope.$on(\"phaseSorted\", function(event, values) {\n\t\t$scope.template.phaseWrappers.splice(values.to, 0, $scope.template.phaseWrappers.splice(values.from, 1)[0]);\n\t\t$scope.updateTaskList();\n\t});\n\n\t$scope.$on(\"phaseAdded\", function(event, values) {\n\t\tvar phase = _.where($scope.availablePhases, {Id: values.phaseId});\n\t\tphase = _.clone(phase[0]);\n\t\tvar association = {\n\t\t\tPhase_Template__c : phase.Id,\n\t\t\tOrder__c : values.to,\n\t\t\tList_Template__c : $scope.templateId,\n\t\t\tPhase_Template__r : {}\n\t\t};\n\t\tdelete phase.Id;\n\t\tdelete phase.$$hashKey;\n\t\t_.extend(association.Phase_Template__r, phase);\n\t\tvar phaseWrapper = {\n\t\t\tassociation : association,\n\t\t\ttaskWrappers : []\n\t\t};\n\t\t$scope.template.phaseWrappers.splice(association.Order__c, 0, phaseWrapper);\n\t\t$scope.updateTaskList();\n\t\t$scope.$broadcast('phaseAddedToTemplate', {\n\t\t\tphaseId : phaseWrapper.association.Phase_Template__c\n\t\t});\n\t});\n\n\t$scope.$on(\"taskSorted\", function(event, values) {\n\t\tvar phaseWrapper = $scope.template.phaseWrappers[values.phaseIndex];\n\t\tif (!phaseWrapper.taskWrappers) {\n\t\t\tphaseWrapper.taskWrappers = [];\n\t\t}\n\t\tphaseWrapper.taskWrappers.splice(values.to, 0, phaseWrapper.taskWrappers.splice(values.from, 1)[0]);\n\t\t$scope.updateTaskList();\n\t});\n\n\t$scope.$on(\"taskAdded\", function(event, values) {\n\t\tvar phaseWrapper = $scope.template.phaseWrappers[values.phaseIndex];\n\t\tif (_.isUndefined(phaseWrapper.taskWrappers)) {\n\t\t\tphaseWrapper.taskWrappers = [];\n\t\t}\n\t\tvar task = _.where($scope.availableTasks, {Id: values.taskId});\n\t\ttask = _.clone(task[0]);\n\t\tvar taskWrapper = {\n\t\t\tassociation : {\n\t\t\t\tTask_Template__c : task.Id,\n\t\t\t\tList_Template__c : $scope.templateId,\n\t\t\t\tOrder__c : values.to,\n\t\t\t\tTask_Template__r : {}\n\t\t\t}\n\t\t};\n\t\tdelete task.Id;\n\t\tdelete task.$$hashKey;\n\t\t_.extend(taskWrapper.association.Task_Template__r, task);\n\t\tif (!phaseWrapper.taskWrappers) {\n\t\t\tphaseWrapper.taskWrappers = [];\n\t\t}\n\t\tphaseWrapper.taskWrappers.splice(taskWrapper.association.Order__c, 0, taskWrapper);\n\t\t$scope.updateTaskList();\n\n\t\tvar eventValues = {\n\t\t\tparentIndex : values.phaseIndex,\n\t\t\tindex : taskWrapper.association.Order__c,\n\t\t\tskipToSpecificAttributes : true\n\t\t};\n\t\t$scope.addTaskModal.index = values.phaseIndex;\n\t\t$scope.addTaskModal.subIndex = taskWrapper.association.Order__c;\n\t\t$scope.taskEditedEventHandler(eventValues);\n\t});\n\n\t$scope.formatTemplateComponents = function(cmpArr) {\n\t\tvar components = [];\n\t\t_.each(cmpArr, function(cmp) {\n\t\t\tvar obj = _.omit(cmp, 'Component__r');\n\t\t\tif (cmp.Component__r) {\n\t\t\t\tdelete cmp.Component__r.Id;\n\t\t\t\t_.extend(obj, cmp.Component__r);\n\t\t\t\tobj.Text__c = componentService.convertBackToHTML(obj.Text__c);\n\t\t\t}\n\t\t\tthis.push(obj);\n\t\t}, components);\n\t\tcmpArr = components;\n\t\treturn cmpArr;\n\t};\n\n\t$scope.goToTemplateDetails = function() {\n\t\t$window.location.href = '/' + $scope.templateId;\n\t};\n\n\t$scope.init();\n\n}]);","var app = angular.module(\"itlApp\");\n\napp.directive(\"affixedComponentPanel\", [\"$window\", function($window) {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\t$(window).scroll(function() {\n\t\t\t\tif ($scope.templateEditMode) {\n\t\t\t\t\tif ($(window).scrollTop() >= $(\"#template-panel\").offset().top) {\n\t\t\t\t\t\t$(element).css(\"position\", \"fixed\");\n\t\t\t\t\t\t$(element).css(\"top\", 0);\n\t\t\t\t\t\t$(element).css(\"left\", 20);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(element).css(\"position\", \"absolute\");\n\t\t\t\t\t\t$(element).css(\"top\", \"\");\n\t\t\t\t\t\t$(element).css(\"left\", 10);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t}\n}]);","var app = angular.module(\"itlApp\");\n\napp.directive(\"availableComponentsPanel\", [\"$window\", function($window) {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\t$(element).height($window.innerHeight - 230);\n\t\t\t$(window).resize(function() {\n\t\t\t\t$(element).height($window.innerHeight - 230);\n\t\t\t});\n\n\t\t}\n\t}\n}]);","var app = angular.module(\"itlApp\");\n\napp.directive(\"availablePhaseDraggable\", function() {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\tif ($scope.templateEditMode) {\n\t\t\t\t$(element).draggable({\n\t\t\t\t\tconnectToSortable: \".template-components\",\n\t\t\t\t\thelper: \"clone\",\n\t\t\t\t\trevert: \"invalid\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.$on(\"templateEditModeOn\", function() {\n\t\t\t\t$(element).draggable({\n\t\t\t\t\tconnectToSortable: \".template-components\",\n\t\t\t\t\thelper: \"clone\",\n\t\t\t\t\trevert: \"invalid\"\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$on(\"templateEditModeOff\", function() {\n\t\t\t\tif ($(element).data('ui-draggable')) {\n\t\t\t\t\t$(element).draggable(\"destroy\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"availableTaskDraggable\", function() {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\tif ($scope.templateEditMode) {\n\t\t\t\tvar phaseId = angular.element(element).scope().task.Phase_Template__c;\n\t\t\t\t// var phaseId = $(element).data(\"phaseId\");\n\t\t\t\tvar connectToSortable;\n\t\t\t\tif ($(\".tasks-phase-\" + phaseId).length > 0) {\n\t\t\t\t\tconnectToSortable = \".tasks-phase-\" + phaseId;\n\t\t\t\t} else {\n\t\t\t\t\tconnectToSortable = \".template-components\";\n\t\t\t\t}\n\t\t\t\t$(element).draggable({\n\t\t\t\t\tconnectToSortable: connectToSortable,\n\t\t\t\t\thelper: \"clone\",\n\t\t\t\t\trevert: \"invalid\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.$on(\"templateEditModeOn\", function() {\n\t\t\t\tvar phaseId = angular.element(element).scope().task.Phase_Template__c;\n\t\t\t\t// var phaseId = $(element).data(\"phaseId\");\n\t\t\t\tvar connectToSortable;\n\t\t\t\tif ($(\".tasks-phase-\" + phaseId).length > 0) {\n\t\t\t\t\tconnectToSortable = \".tasks-phase-\" + phaseId;\n\t\t\t\t} else {\n\t\t\t\t\tconnectToSortable = \".template-components\";\n\t\t\t\t}\n\t\t\t\t$(element).draggable({\n\t\t\t\t\tconnectToSortable: connectToSortable,\n\t\t\t\t\thelper: \"clone\",\n\t\t\t\t\trevert: \"invalid\"\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$on(\"phaseAddedToTemplate\", function(event, values) {\n\t\t\t\tvar phaseId = angular.element(element).scope().task.Phase_Template__c;\n\t\t\t\t// var phaseId = $(element).data(\"phaseId\");\n\t\t\t\tif (phaseId == values.phaseId) {\n\t\t\t\t\tif ($(element).data('ui-draggable')) {\n\t\t\t\t\t\t$(element).draggable(\"destroy\");\n\t\t\t\t\t}\n\t\t\t\t\t//var phaseId = $(element).data(\"phaseId\");\n\t\t\t\t\tvar connectToSortable;\n\t\t\t\t\tif ($(\".tasks-phase-\" + phaseId).length > 0) {\n\t\t\t\t\t\tconnectToSortable = \".tasks-phase-\" + phaseId;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconnectToSortable = \".template-components\";\n\t\t\t\t\t}\n\t\t\t\t\t$(element).draggable({\n\t\t\t\t\t\tconnectToSortable: connectToSortable,\n\t\t\t\t\t\thelper: \"clone\",\n\t\t\t\t\t\trevert: \"invalid\"\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t$scope.$on(\"templateEditModeOff\", function() {\n\t\t\t\tif ($(element).data('ui-draggable')) {\n\t\t\t\t\t$(element).draggable(\"destroy\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"componentSearch\", function() {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\t$scope.$watch(attrs.ngModel, function(newValue, oldValue) {\n\t\t\t\t$(\".available-component\").show();\n\t\t\t\tif (newValue) {\n\t\t\t\t\t$(\".available-component\").not(\":containsi('\" + newValue + \"')\").hide();\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive('contactLookup', [\"$window\", function($window) {\n    return {\n        restrict: 'A',\n        link: function ($scope, element, attrs) {\n\n            var renderItem = function(ul, item) {\n                var liHTML = '<a id=\"' + item.valueId + '\" role=\"option\">'\n                            + '<svg aria-hidden=\"true\" class=\"slds-icon slds-icon-standard-account slds-icon--small ie-contact-icon\">'\n                            + '<use xlink:href=\"' + resourceUrl + '/icons/standard-sprite/svg/symbols.svg#contact\"></use>'\n                            + '</svg>' + item.label + '</a>';\n                return $('<li>').addClass('slds-lookup__item').append(liHTML).appendTo(ul);\n            };\n\n            var renderMenu = function(ul, items) {\n                $(ul).addClass('slds-lookup__list contact-lookup-menu');\n                _.each(items, function(item) {\n                    this._renderItemData(ul, item);\n                }, this);\n            };\n\n        \t$(element).autocomplete({\n        \t\tsource: $scope.contactOptions,\n        \t\tselect: function(event, ui) {\n                    $scope.$apply(function() {\n            \t\t\t$scope.$emit('contactSelected-emit', {\n            \t\t\t\titem: ui.item\n            \t\t\t});\n                    });\n                    event.preventDefault();\n        \t\t},\n                minLength: 0,\n                appendTo: $(element).parent()\n        \t});\n\n            $(element).autocomplete(\"instance\")._renderItem = renderItem;\n            $(element).autocomplete(\"instance\")._renderMenu = renderMenu;\n\n            $(element).prevAll('.slds-input__icon').click(function() {\n                $(element).autocomplete( \"search\", \"\" );\n            });\n\n            //$(element).attr('autocomplete', 'on');\n            \n        }\n    }\n}]);","var app = angular.module(\"itlApp\");\n\napp.directive('datePicker', [\"$window\", function($window) {\n    return {\n        restrict: 'A',\n        link: function ($scope, element, attrs) {\n\n            $(element).datepicker();\n\n            if (attrs.mindate) {\n            \t$(element).datepicker(\"option\", \"minDate\", attrs.mindate);\n            }\n        }\n    }\n}]);","var app = angular.module(\"itlApp\");\n\napp.directive(\"expandTableRow\", function() {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\t$(element).click(function() {\n\t\t\t\tvar details = $(this).find('.needs-expanding');\n\t\t\t\tdetails.toggleClass('slds-cell-wrap');\n\t\t\t\tdetails.toggleClass('formatted-text');\n\t\t\t\tdetails.toggleClass('slds-truncate');\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive('phaseCollapse', [\"$window\", function($window) {\n    return {\n        restrict: 'A',\n        link: function ($scope, element, attrs) {\n\n            $(element).click(function() {\n            \t$(this).siblings('.slds-timeline').slideToggle();\n            });\n        }\n    }\n}]);","var app = angular.module(\"itlApp\");\n\napp.directive(\"phaseContainer\", function() {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\tif ($scope.templateEditMode) {\n\t\t\t\t$(element).mouseover(function(event) {\n\t\t\t\t\tif (event.target === this) {\n\t\t\t\t\t\t$(this).find(\".edit-component-corner-button\").not(\".task-components .edit-component-corner-button\").show();\n\t\t\t\t\t\t$(this).find(\".delete-component-corner-button\").not(\".task-components .delete-component-corner-button\").show();\n\t\t\t\t\t\t$(this).find(\".add-component-above-button\").not(\".task-components .add-component-above-button\").show();\n\t\t\t\t\t\t$(this).find(\".add-component-below-button\").not(\".task-components .add-component-below-button\").show();\n\t\t\t\t\t}\n\t\t\t\t}).mouseleave(function() {\n\t\t\t\t\t$(this).find(\".edit-component-corner-button\").not(\".task-components .edit-component-corner-button\").hide();\n\t\t\t\t\t$(this).find(\".delete-component-corner-button\").not(\".task-components .delete-component-corner-button\").hide();\n\t\t\t\t\t$(this).find(\".add-component-above-button\").not(\".task-components .add-component-above-button\").hide();\n\t\t\t\t\t$(this).find(\".add-component-below-button\").not(\".task-components .add-component-below-button\").hide();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.$on(\"templateEditModeOn\", function() {\n\t\t\t\t$(element).addClass(\"template-component-adder\");\n\t\t\t\t$(element).off();\n\t\t\t\t$(element).mouseover(function(event) {\n\t\t\t\t\tif (event.target === this) {\n\t\t\t\t\t\t$(this).find(\".edit-component-corner-button\").not(\".task-components .edit-component-corner-button\").show();\n\t\t\t\t\t\t$(this).find(\".delete-component-corner-button\").not(\".task-components .delete-component-corner-button\").show();\n\t\t\t\t\t\t$(this).find(\".add-component-above-button\").not(\".task-components .add-component-above-button\").show();\n\t\t\t\t\t\t$(this).find(\".add-component-below-button\").not(\".task-components .add-component-below-button\").show();\n\t\t\t\t\t}\n\t\t\t\t}).mouseleave(function() {\n\t\t\t\t\t$(this).find(\".edit-component-corner-button\").not(\".task-components .edit-component-corner-button\").hide();\n\t\t\t\t\t$(this).find(\".delete-component-corner-button\").not(\".task-components .delete-component-corner-button\").hide();\n\t\t\t\t\t$(this).find(\".add-component-above-button\").not(\".task-components .add-component-above-button\").hide();\n\t\t\t\t\t$(this).find(\".add-component-below-button\").not(\".task-components .add-component-below-button\").hide();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$on(\"templateEditModeOff\", function() {\n\t\t\t\t$(element).off();\n\t\t\t\t$(element).removeClass(\"template-component-adder\");\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"phaseDelete\", function() {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\t$(element).click(function() {\n\t\t\t\tvar phase = $(this).parents(\".template-component\");\n\t\t\t\tvar index = angular.element(phase).scope().indexPhase;\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t$scope.$emit(\"phaseDeleted\", {\n\t\t\t\t\t\tindex: index\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"phase\", function() {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\tif ($scope.templateEditMode) {\n\t\t\t\t$(element).css(\"marginTop\", 30).css(\"marginBottom\", 30);\n\t\t\t}\n\n\t\t\t$scope.$on(\"templateEditModeOn\", function() {\n\t\t\t\t$(element).animate({\n\t\t\t\t\tmarginTop: 30,\n\t\t\t\t\tmarginBottom: 30\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$on(\"templateEditModeOff\", function() {\n\t\t\t\t$(element).animate({\n\t\t\t\t\tmarginTop: 0,\n\t\t\t\t\tmarginBottom: 0\n\t\t\t\t});\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"phaseEdit\", function() {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\t$(element).click(function() {\n\t\t\t\tvar phase = $(this).parents(\".template-component\");\n\t\t\t\tvar index = angular.element(phase).scope().indexPhase;\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t$scope.$emit(\"phaseEdited\", {\n\t\t\t\t\t\tindex: index\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"phaseSortable\", function() {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\tvar deactivate = function(event, ui) {\n\t\t\t\tif (ui.item.data(\"taskId\")) {\n\t\t\t\t\tvar taskId = ui.item.data(\"taskId\");\n\t\t\t\t\tvar phaseId = ui.item.data(\"phaseId\");\n\t\t\t\t\tvar to = element.children().index(ui.item);\n\t\t\t\t\tif (to >= 0) {\n\t\t\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t\t\t$scope.$emit(\"phaseAndTaskAdded\", {\n\t\t\t\t\t\t\t\ttaskId: taskId,\n\t\t\t\t\t\t\t\tphaseId: phaseId,\n\t\t\t\t\t\t\t\tto: to\n\t\t\t\t\t\t\t});\n\t          \t\t\t\tui.item.remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar phaseId = ui.item.data(\"phaseId\");\n\t\t\t\t\tif ($(element).find('[data-phase-id=\"' + phaseId + '\"]').length > 1) {\n\t\t\t\t\t\tui.item.remove();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar from = -1;\n\t\t\t\t\t\tif (!_.isUndefined(angular.element(ui.item).scope().indexPhase)) {\n\t\t\t\t\t\t\tfrom = angular.element(ui.item).scope().indexPhase;\n\t\t\t\t\t\t}\n\t\t        \t\tvar to = element.children().index(ui.item);\n\t\t        \t\tif (to >= 0) {\n\t\t          \t\t\t$scope.$apply(function() {\n\t\t            \t\t\tif (from >= 0) {\n\t\t              \t\t\t\t$scope.$emit(\"phaseSorted\", {from: from, to: to});\n\t\t            \t\t\t} else {\n\t\t          \t\t\t\t\t$scope.$emit(\"phaseAdded\", {\n\t\t\t\t\t\t\t\t\t\tphaseId: phaseId,\n\t\t\t\t\t\t\t\t\t\tto: to\n\t\t\t\t\t\t\t\t\t});\n\t\t              \t\t\t\tui.item.remove();\n\t\t            \t\t\t}\n\t\t          \t\t\t});\n\t\t        \t\t}\n\t\t        \t}\n\t        \t}\n\t\t\t};\n\n\t\t\tif ($scope.templateEditMode) {\n\t\t\t\t$(element).sortable({\n\t\t\t\t\trevert: true,\n\t\t\t\t\ttolerance: \"pointer\",\n\t\t\t\t\tplaceholder: \"ui-state-highlight\",\n\t\t\t\t\tdeactivate: deactivate\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.$on(\"templateEditModeOn\", function() {\n\t\t\t\t$(element).sortable({\n\t\t\t\t\trevert: true,\n\t\t\t\t\ttolerance: \"pointer\",\n\t\t\t\t\tplaceholder: \"ui-state-highlight\",\n\t\t\t\t\tdeactivate: deactivate\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$on(\"templateEditModeOff\", function() {\n\t\t\t\tif ($(element).data('ui-sortable')) {\n\t\t\t\t\t$(element).sortable(\"destroy\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"taskContainer\", function() {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\tif ($scope.templateEditMode) {\n\t\t\t\t$(element).mouseover(function() {\n\t\t\t\t\t$(this).find(\".edit-component-corner-button\").show();\n\t\t\t\t\t$(this).find(\".delete-component-corner-button\").show();\n\t\t\t\t\t$(this).find(\".add-component-above-button\").show();\n\t\t\t\t\t$(this).find(\".add-component-below-button\").show();\n\t\t\t\t}).mouseleave(function() {\n\t\t\t\t\t$(this).find(\".edit-component-corner-button\").hide();\n\t\t\t\t\t$(this).find(\".delete-component-corner-button\").hide();\n\t\t\t\t\t$(this).find(\".add-component-above-button\").hide();\n\t\t\t\t\t$(this).find(\".add-component-below-button\").hide();\n\t\t\t\t}).mouseenter(function() {\n\t\t\t\t\tvar parent = $(this).parents(\".template-component-adder\");\n\t\t\t\t\tparent.find(\".edit-component-corner-button\").not(\".task-components .edit-component-corner-button\").hide();\n\t\t\t\t\tparent.find(\".delete-component-corner-button\").not(\".task-components .delete-component-corner-button\").hide();\n\t\t\t\t\tparent.find(\".add-component-above-button\").not(\".task-components .add-component-above-button\").hide();\n\t\t\t\t\tparent.find(\".add-component-below-button\").not(\".task-components .add-component-below-button\").hide();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.$on(\"templateEditModeOn\", function() {\n\t\t\t\t$(element).addClass(\"task-component-adder\");\n\t\t\t\t$(element).off();\n\t\t\t\t$(element).mouseover(function() {\n\t\t\t\t\t$(this).find(\".edit-component-corner-button\").show();\n\t\t\t\t\t$(this).find(\".delete-component-corner-button\").show();\n\t\t\t\t\t$(this).find(\".add-component-above-button\").show();\n\t\t\t\t\t$(this).find(\".add-component-below-button\").show();\n\t\t\t\t}).mouseleave(function() {\n\t\t\t\t\t$(this).find(\".edit-component-corner-button\").hide();\n\t\t\t\t\t$(this).find(\".delete-component-corner-button\").hide();\n\t\t\t\t\t$(this).find(\".add-component-above-button\").hide();\n\t\t\t\t\t$(this).find(\".add-component-below-button\").hide();\n\t\t\t\t}).mouseenter(function() {\n\t\t\t\t\tvar parent = $(this).parents(\".template-component-adder\");\n\t\t\t\t\tparent.find(\".edit-component-corner-button\").not(\".task-components .edit-component-corner-button\").hide();\n\t\t\t\t\tparent.find(\".delete-component-corner-button\").not(\".task-components .delete-component-corner-button\").hide();\n\t\t\t\t\tparent.find(\".add-component-above-button\").not(\".task-components .add-component-above-button\").hide();\n\t\t\t\t\tparent.find(\".add-component-below-button\").not(\".task-components .add-component-below-button\").hide();\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$on(\"templateEditModeOff\", function() {\n\t\t\t\t$(element).off();\n\t\t\t\t$(element).removeClass(\"task-component-adder\");\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"taskDelete\", function() {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\t$(element).click(function() {\n\t\t\t\tvar cmp = $(this).parents(\".task-component\");\n\t\t\t\tvar index = angular.element(cmp).scope().indexTask;\n\t\t\t\tvar parentIndex = angular.element(cmp).scope().indexPhase;\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t$scope.$emit(\"taskDeleted\", {\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\tparentIndex: parentIndex\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"task\", function() {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\tif ($scope.templateEditMode) {\n\t\t\t\t$(element).css(\"marginTop\", 30).css(\"marginBottom\", 30);\n\t\t\t}\n\n\t\t\t$scope.$on(\"templateEditModeOn\", function() {\n\t\t\t\t$(element).animate({\n\t\t\t\t\tmarginTop: 30,\n\t\t\t\t\tmarginBottom: 30\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$on(\"templateEditModeOff\", function() {\n\t\t\t\t$(element).animate({\n\t\t\t\t\tmarginTop: 0,\n\t\t\t\t\tmarginBottom: 0\n\t\t\t\t});\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"taskEdit\", function() {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\t$(element).click(function() {\n\t\t\t\tvar cmp = $(this).parents(\".task-component\");\n\t\t\t\tvar index = angular.element(cmp).scope().indexTask;\n\t\t\t\tvar parentIndex = angular.element(cmp).scope().indexPhase;\n\t\t\t\t$scope.$apply(function() {\n\t\t\t\t\t$scope.$emit(\"taskEdited\", {\n\t\t\t\t\t\tindex: index,\n\t\t\t\t\t\tparentIndex: parentIndex\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"taskScrollTop\", function() {\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\t$(element).click(function() {\n\t\t\t\t$(window).scrollTop(0);\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive(\"taskSortable\", function() {\n\treturn {\n\t\trestrict: \"A\",\n\t\tlink: function($scope, element, attrs) {\n\n\t\t\tvar deactivate = function(event, ui) {\n\t\t\t\tvar phaseIndex = $(this).parents(\".template-component\").prevAll().length;\n\t\t\t\tvar taskId = ui.item.data(\"taskId\");\n\t\t\t\tvar from = -1;\n\t\t\t\tif (!_.isUndefined(angular.element(ui.item).scope().indexTask)) {\n\t\t\t\t\tfrom = angular.element(ui.item).scope().indexTask;\n\t\t\t\t}\n        \t\tvar to = element.children().index(ui.item);\n        \t\tif (to >= 0) {\n          \t\t\t$scope.$apply(function() {\n            \t\t\tif (from >= 0) {\n              \t\t\t\t$scope.$emit(\"taskSorted\", {\n\t\t\t\t\t\t\t\tfrom: from,\n\t\t\t\t\t\t\t\tto: to,\n\t\t\t\t\t\t\t\tphaseIndex: phaseIndex\n\t\t\t\t\t\t\t});\n            \t\t\t} else {\n          \t\t\t\t\t$scope.$emit(\"taskAdded\", {\n\t\t\t\t\t\t\t\tto: to,\n\t\t\t\t\t\t\t\ttaskId: taskId,\n\t\t\t\t\t\t\t\tphaseIndex: phaseIndex\n\t\t\t\t\t\t\t});\n              \t\t\t\tui.item.remove();\n            \t\t\t}\n          \t\t\t});\n        \t\t}\n\t\t\t};\n\n\t\t\tif ($scope.templateEditMode) {\n\t\t\t\t$(element).sortable({\n\t\t\t\t\trevert: true,\n\t\t\t\t\ttolerance: \"pointer\",\n\t\t\t\t\tplaceholder: \"ui-state-highlight\",\n\t\t\t\t\tdeactivate: deactivate\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$scope.$on(\"templateEditModeOn\", function() {\n\t\t\t\t$(element).sortable({\n\t\t\t\t\trevert: true,\n\t\t\t\t\ttolerance: \"pointer\",\n\t\t\t\t\tplaceholder: \"ui-state-highlight\",\n\t\t\t\t\tdeactivate: deactivate\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$scope.$on(\"templateEditModeOff\", function() {\n\t\t\t\tif ($(element).data('ui-sortable')) {\n\t\t\t\t\t$(element).sortable(\"destroy\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t}\n});","var app = angular.module(\"itlApp\");\n\napp.directive('windowHeight', [\"$window\", function($window) {\n    return {\n        restrict: 'A',\n        link: function ($scope, element, attrs) {\n\n        \tvar height = $window.innerHeight;\n            $(element).css({\n            \t\"maxHeight\" : height,\n            \t\"overflowY\" : \"auto\"\n            });\n        }\n    }\n}]);","var app = angular.module('itlApp');\n\napp.filter(\"convertToDateString\", [function() {\n\treturn function(input) {\n\t\tvar dateString = '';\n\t\tif (input) {\n\t\t\tvar convertedDate = new Date(input);\n\t\t\tdateString = (convertedDate.getUTCMonth() + 1) + '/' + convertedDate.getUTCDate() + '/' + convertedDate.getUTCFullYear();\n\t\t}\n\t\treturn dateString;\n\t};\n}]);","var app = angular.module('itlApp');\n\napp.filter(\"abbreviateNoteTypes\", [function() {\n\treturn function(input) {\n\t\tvar types = '';\n\t\tif (input) {\n\t\t\tvar typeValues = [];\n\t\t\t_.each(input, function(textWrapper) {\n\t\t\t\ttypeValues.push(textWrapper.text.Type__c.substring(0, 1));\n\t\t\t});\n\t\t\ttypeValues = _.sortBy(typeValues, function(letter) {return letter;});\n\t\t\ttypeValues = _.uniq(typeValues);\n\t\t\ttypes = typeValues.join(',');\n\t\t}\n\t\treturn types;\n\t};\n}]);","var app = angular.module('itlApp');\n\napp.filter(\"picklistTransform\", [function() {\n\treturn function(input) {\n\t\tvar ret = input.split(';');\n\t\treturn ret;\n\t};\n}]);\n\napp.filter(\"picklistNewLine\", [function() {\n\treturn function(input) {\n\t\tvar ret = input.replace(/;/g, ',<br/>');\n\t\treturn ret;\n\t};\n}]);","var app = angular.module('itlApp');\n\napp.filter(\"changeTaskNumberToName\", [function() {\n\treturn function(input, taskList) {\n\t\tvar inputNum = parseInt(input, 10);\n\t\tvar tasks = _.where(taskList, {templateOrderIndex: inputNum});\n\t\treturn tasks[0].association.Task_Template__r.Task_Name__c;\n\t};\n}]);","var app = angular.module(\"itlApp\");\n\napp.service(\"componentService\", [function() {\n\tthis.convertBackToHTML = function(text) {\n\t\tvar e = document.createElement('div');\n\t  \te.innerHTML = text;\n\t  \tvar ret = e.childNodes.length === 0 ? \"\" : e.childNodes[0].nodeValue;\n\t  \tif (ret) {\n\t  \t\tvar e2 = document.createElement('div');\n\t  \t\t$(e2).html(ret);\n\t  \t\t$(e2).find(\"[style]\").css(\"color\", \"\");\n\t  \t\tret = $(e2).html();\n\t  \t}\n\t  \treturn ret;\n\t};\n\tthis.removeEscapedCharacters = function(text) {\n\t\tvar e = document.createElement('div');\n\t  \te.innerHTML = text;\n\t  \treturn e.childNodes.length === 0 ? \"\" : e.childNodes[0].nodeValue;\n\t};\n\tthis.fixStatuses = function(statuses) {\n\t\tswitch (statuses) {\n\t\t\tcase 'Completed;Not Completed':\n\t\t\t\tstatuses = 'Not Completed;Completed';\n\t\t\t\tbreak;\n\t\t\tcase 'Not Applicable;Not Completed;Completed':\n\t\t\tcase 'Not Applicable;Completed;Not Completed':\n\t\t\tcase 'Not Completed;Completed;Not Applicable':\n\t\t\tcase 'Completed;Not Completed;Not Applicable':\n\t\t\tcase 'Completed;Not Applicable;Not Completed':\n\t\t\t\tstatuses = 'Not Completed;Not Applicable;Completed';\n\t\t\t\tbreak;\n\t\t\tcase 'Reviewed;Not Reviewed':\n\t\t\t\tstatuses = 'Not Reviewed;Reviewed';\n\t\t\t\tbreak;\n\t\t\tcase 'Reviewed;Not Applicable;Not Reviewed':\n\t\t\tcase 'Not Applicable;Not Reviewed;Reviewed':\n\t\t\tcase 'Not Applicable;Reviewed;Not Reviewed':\n\t\t\tcase 'Not Reviewed;Reviewed;Not Applicable':\n\t\t\tcase 'Reviewed;Not Reviewed;Not Applicable':\n\t\t\t\tstatuses = 'Not Reviewed;Not Applicable;Reviewed';\n\t\t\t\tbreak;\n\t\t}\n\t\treturn statuses;\n\t};\n}]);","var app = angular.module(\"itlApp\");\n\napp.service(\"dateService\", [function() {\n\tthis.convertToSFDCSafeString = function(dateValue) {\n\t\treturn Date.parse(dateValue + ' 00:00:00 GMT');\n\t};\n\tthis.convertToDateString = function(milliseconds) {\n\t\tvar dateString = '';\n\t\tif (milliseconds) {\n\t\t\tvar convertedDate = new Date(milliseconds);\n\t\t\tdateString = (convertedDate.getUTCMonth() + 1) + '/' + convertedDate.getUTCDate() + '/' + convertedDate.getUTCFullYear();\n\t\t}\n\t\treturn dateString;\n\t};\n}]);"]}